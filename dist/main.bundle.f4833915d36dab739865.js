(()=>{"use strict";var e,t,n,r={4290:(e,t,n)=>{n(3375),n(7804),n(210);var r=n(5466),a=n(3897),l=n(7253),i=n(4106),o=n(5653),c=n(1066),s=n(3219),m=n(5252),d=n(4050),u={button:{display:"flex",width:"180px",height:"40px",color:"#ffffff",marginTop:"8px",marginBottom:"8px",borderRadius:"8px",backgroundColor:"#444444","&:hover":{backgroundColor:"#b6b6b6",borderRadius:"8px"}}},p=e=>{var t=e.label,n=e.onClick,a=e.disabled;return r.createElement(d.Z,{variant:"contained",sx:u.button,onClick:n,disabled:!!a},t)},g={search:"",sites:[],companies:[],start_date:null,end_date:null},f="This field is required",E="250px",y={container:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},loginCard:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",maxWidth:343,minWidth:343,height:244,padding:"44px 93px 44px 93px",borderRadius:"16px",borderColor:"#E6E6E6"},title:{fontSize:"24px",fontWeight:500,marginBottom:"20px"},helperRow:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},forgotPassButton:{cursor:"pointer"},logo:{cursor:"pointer",width:E}},b=()=>{var e=(0,m.D3)().loginWithRedirect;return r.createElement(p,{label:"Login",onClick:()=>e()})},h=()=>r.createElement(c.Z,{sx:{display:"flex",flexDirection:"column"}},r.createElement(c.Z,{sx:{height:"133px"}},r.createElement("img",{src:"logo.png",alt:"Smarterise",style:y.logo})),r.createElement(c.Z,{sx:y.container},r.createElement(s.Z,{sx:y.loginCard,variant:"outlined"},r.createElement(c.Z,{sx:y.title},"Login to continue"),r.createElement(b,null)))),x=n(9655),v=n(8270),Z=n(2010),O=n(9994),_=n(6556),w=n(5056),P=n(4321),j=e=>{var t=e.options,n=e.label,a=e.value,l=e.setValue,i=e.multiselect;return r.createElement(c.Z,{sx:{minWidth:120,width:"100%",maxWidth:300}},r.createElement(P.Z,{fullWidth:!0},n?r.createElement(O.Z,{id:"Label"},n):void 0,r.createElement(_.Z,{sx:{background:"#F9F9F9",borderColor:"#E5E5E5"},labelId:n?"Label":void 0,multiple:!!i,id:"selection",value:a,onChange:e=>{l(e.target.value)}},t.map(((e,t)=>r.createElement(w.Z,{key:t,value:e.value},e.label))))))},D=n(8454),A=n(7226),S=n(9175),C=n(453),R={container:{background:"#F9F9F9",borderColor:"#E5E5E5"}};const z=e=>{var t=e.label,n=e.value,a=e.setValue;return r.createElement(c.Z,{sx:R.container},r.createElement(C._,{dateAdapter:D.H},r.createElement(A.M,{label:t,value:n,onChange:e=>{a(e)},renderInput:e=>r.createElement(S.Z,e)})))};var k=n(1604),L=k.z.object({id:k.z.number(),asset_name:k.z.string(),name:k.z.string(),asset_type:k.z.string(),asset_co_ordinate:k.z.string(),asset_capacity:k.z.number(),time:k.z.string()}),T=k.z.object({count:k.z.number(),next:k.z.nullable(k.z.string()),previous:k.z.nullable(k.z.string()),results:k.z.array(L)}),I=n(4390),U=n(4264),N=n.n(U),M=n(9630);function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return null!=t?e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t}):e.toLocaleString("en-US")}var W=Intl.NumberFormat("en",{notation:"compact"});function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return W.format(e)}function F(e){return(0,M.Z)(new Date(e),"yyyy-LL-dd, HH:MM aa")}function H(e){return(0,M.Z)(e,"yyyy-LL-dd")}var K=function(){var e=(0,I.Z)(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((e=>setTimeout(e,t))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Q(e,t){if(null!=t)return e.find((e=>e.id===t))}var V={BASE_URL:process.env.REACT_APP_API_URL,AUTH0_CLIENT_ID:"hRLHdjXQH7M3j8Tj1ygx7t8YZ0jgZsnxH",AUTH0_DOMAIN:"dev-mgw72jpas4obd84e.us.auth0.com",AUTH0_AUDIENCE:process.env.REACT_APP_AUTH0_AUDIENCE,AUTH0_SECRET_KEY:"fmJkyRyv5VLEixz_sDJVpMxv0P34sJVWFO0wkyRd8tRYjXVe9OBIQjVw5wyf6heg"};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=V.BASE_URL;var X=k.z.union([k.z.string(),k.z.number()]),$=k.z.array(k.z.array(X)),ee=k.z.object({dataset:$}),te=k.z.object({total:k.z.number(),dataset:k.z.array(k.z.object({key:k.z.string(),value:k.z.number()}))});function ne(e){return e.text().then((t=>{var n=t&&JSON.parse(t);if(!e.ok){var r=n&&n.message||e.statusText;return Promise.reject(r)}return n}))}function re(){return localStorage.getItem("auth0Token")}function ae(e,t){var n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(re())}},r=new URL("".concat(Y).concat(e));return null!=t&&t.queryParams&&(r.search=new URLSearchParams(null==t?void 0:t.queryParams).toString()),fetch(r,n).then(ne)}function le(e,t,n){var r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(re())},body:JSON.stringify(t)},a=new URL("".concat(Y).concat(e));return null!=n&&n.queryParams&&(a.search=new URLSearchParams(null==n?void 0:n.queryParams).toString()),fetch(a,r).then(ne)}function ie(e,t,n){var r={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(re())},body:JSON.stringify(t)},a=new URL("".concat(Y).concat(e,"/").concat(t.id));return null!=n&&n.queryParams&&(a.search=new URLSearchParams(null==n?void 0:n.queryParams).toString()),fetch(a,r).then(ne)}function oe(e,t,n,r){var a={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(re())},body:JSON.stringify(n)},l=new URL("".concat(Y).concat(e,"/").concat(t.toString()));return null!=r&&r.queryParams&&(l.search=new URLSearchParams(null==r?void 0:r.queryParams).toString()),fetch(l,a).then(ne)}function ce(e,t,n){var r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(re())}},a=new URL("".concat(Y).concat(e,"/").concat(t));return null!=n&&n.queryParams&&(a.search=new URLSearchParams(null==n?void 0:n.queryParams).toString()),fetch(a,r).then(ne)}function se(e){return G(G(G({},function(e){var t={};return null!=e&&e.pagination&&(t=G(G({},t),{},{page:(null==e?void 0:e.pagination.page)+1,page_size:null==e?void 0:e.pagination.page_size})),t}(e)),function(e){var t,n,r=null==e?void 0:e.filters,a={};return r&&(r.search&&""!=r.search&&(a=G(G({},a),{},{search:r.search})),r.sites&&(null===(t=r.sites)||void 0===t?void 0:t.length)>0&&(a=G(G({},a),{},{sites:r.sites.join(",")})),r.companies&&(null===(n=r.companies)||void 0===n?void 0:n.length)>0&&(a=G(G({},a),{},{companies:r.companies.join(",")})),null!=r.start_date&&(a=G(G({},a),{},{start_date:H(r.start_date)})),null!=r.end_date&&(a=G(G({},a),{},{end_date:H(r.end_date)})),null!=r.status&&(a=G(G({},a),{},{status:r.status}))),a}(e)),null!=e&&e.card_type?{card_type:null==e?void 0:e.card_type}:{})}function me(e){var t=e.localUseRealData,n=e.apiRoute,r=e.schema,a=e.mockResponse,l=e.transformFunction;return function(){var e=(0,I.Z)(N().mark((function e(i){var o,c,s,m;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=se(i),!(c=t&&!0)){e.next=8;break}return e.next=5,ae(n,{queryParams:o});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=a;case 9:if(s=e.t0,"users"===n&&(s.results=s.results.filter((e=>null!=e.employee_id))),console.log("validatedResponse",s),m=r.parse(s),c){e.next=16;break}return e.next=16,K(2e3);case 16:if(!l){e.next=20;break}return e.abrupt("return",l(m));case 20:return e.abrupt("return",m);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var de=n(6098),ue="sites",pe=me({localUseRealData:!0,apiRoute:ue,schema:T,mockResponse:{count:100,next:null,previous:null,results:[{id:1,asset_name:"David ABU-235LK",name:"Smarterise",asset_type:"Transformer",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:2,asset_name:"Daniel ABU-235LK",name:"EKGB",asset_type:"Generator",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:3,asset_name:"Emma ABU-235LK",name:"Vercase",asset_type:"Solar PV",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:4,asset_name:"Jerry ABU-235LK",name:"Jim Ltd",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:5,asset_name:"Jerry ABU-235LK",name:"Jim Ltd1",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:6,asset_name:"Jerry ABU-235LK",name:"Jim Ltd2",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:7,asset_name:"Jerry ABU-235LK",name:"Jim Ltd3",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:8,asset_name:"Jerry ABU-235LK",name:"Jim Ltd4",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:9,asset_name:"Jerry ABU-235LK",name:"Jim Ltd5",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:10,asset_name:"Jerry ABU-235LK",name:"Jim Ltd6",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:11,asset_name:"Jerry ABU-235LK",name:"Jim Ltd7",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:12,asset_name:"Jerry ABU-235LK",name:"Jim Ltd8",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:13,asset_name:"Jerry ABU-235LK",name:"Jim Ltd9",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:14,asset_name:"Jerry ABU-235LK",name:"Jim Ltd10",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:15,asset_name:"Jerry ABU-235LK",name:"Jim Ltd12",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:16,asset_name:"Jerry ABU-235LK",name:"Jim Ltd13",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:17,asset_name:"Jerry ABU-235LK",name:"Jim Ltd14",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"},{id:18,asset_name:"Jerry ABU-235LK",name:"Jim Ltd15",asset_type:"Battery",asset_co_ordinate:"N12.45 E7.80",asset_capacity:300,time:"Sun · 14 April, 04:25 AM"}]}}),ge=e=>(0,de.useQuery)([ue,e],(()=>pe(e))),fe=e=>{var t=e.Icon,n=e.round,a=e.light,l=e.onClick;return r.createElement(d.Z,{variant:"contained",sx:{display:"flex",minWidth:"32px",height:"32px",color:"#6E7883",padding:0,marginRight:"25px",borderRadius:n?"64px":"16px",backgroundColor:a?"#F2F2F2":"#C4C4C4","&:hover":{backgroundColor:"#b6b6b6",borderRadius:n?"64px":"16px"}},onClick:l},r.createElement(t,null))},Ee=n(1005),ye=n(9822),be=n(9460);const he=()=>{var e=(0,o.TH)().pathname.split("/"),t=e.length>1?e[1]:"",n=(0,o.s0)(),a=(0,m.D3)().logout;return r.createElement(r.Fragment,null,"finance"!==t?r.createElement(fe,{light:!0,Icon:Ee.Z,onClick:()=>{n("/operations/activityLog")}}):null,r.createElement(fe,{round:!0,Icon:ye.Z,onClick:()=>n("/account")}),r.createElement(fe,{round:!0,Icon:be.Z,onClick:()=>a({returnTo:"".concat(window.location.origin,"/login")})}))};var xe=e=>{var t=e.children;return r.createElement(Z.ZP,{container:!0,spacing:1,sx:{marginBottom:"16px"}},r.createElement(Z.ZP,{item:!0,lg:9,md:12,sm:12,order:{lg:1,md:2,sm:2,xs:2}},t),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12,order:{lg:2,md:1,sm:1,xs:1},sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},r.createElement(he,null)))};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Oe=e=>{var t,n,a,l=e.filters,i=e.setFilters,o=ge({filters:{companies:l.companies}}).data,c=e=>t=>{i((n=>Ze(Ze({},n),{},{[e]:t})))};return r.createElement(xe,null,r.createElement(Z.ZP,{container:!0,spacing:1,sx:{maxWidth:"650px"}},r.createElement(Z.ZP,{item:!0,lg:4,md:4,sm:12,xs:12},r.createElement(j,{multiselect:!0,label:"Sites(s)",options:null!==(t=null==o?void 0:o.results.map((e=>({label:e.name,value:e.id}))))&&void 0!==t?t:[],value:l.sites,setValue:c("sites")})),r.createElement(Z.ZP,{item:!0,lg:4,md:4,sm:12,xs:12},r.createElement(z,{label:"Start Date",value:null!==(n=l.start_date)&&void 0!==n?n:null,setValue:c("start_date")})),r.createElement(Z.ZP,{item:!0,lg:4,md:4,sm:12,xs:12},r.createElement(z,{label:"End Date",value:null!==(a=l.end_date)&&void 0!==a?a:null,setValue:c("end_date")}))))};var _e="operations/sites-monitored",we=me({localUseRealData:!0,apiRoute:_e,schema:te,mockResponse:{total:12e3,dataset:[{key:"active",value:40},{key:"offline",value:60}]}}),Pe=n(2569);function je(){return r.createElement(c.Z,{sx:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"}},r.createElement(Pe.Z,null))}var De=n(3106);const Ae=e=>{var t={title:{text:e.pieTitle,left:"center",bottom:"25%"},legend:{top:"bottom"},series:[{type:"pie",data:e.data,radius:["40%","70%"],center:["50%","35%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1}}]};return r.createElement(De.Z,{option:t})};function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re={container:{borderRadius:"16px",padding:"16px",display:"flex",flexDirection:"column",width:"88%",height:"306px"},content:{paddingTop:"8px",fontWeight:"bold",fontSize:"14px",lineHeight:"17px"}};const ze=e=>{var t,n,a;return r.createElement(s.Z,{sx:Ce(Ce({},Re.container),{},{width:null!==(t=e.width)&&void 0!==t?t:Re.container.width,maxWidth:null!==(n=e.width)&&void 0!==n?n:Re.container.width,height:null!==(a=e.height)&&void 0!==a?a:Re.container.height}),variant:"outlined"},r.createElement(c.Z,{sx:Re.content},e.title),e.children)};function ke(e){var t,n=e.keyLabelMapping,a=e.pieTitle,l=e.cardTitle,i=e.data,o=e.isLoading,s=e.isError,m=null!==(t=null==i?void 0:i.dataset.filter((e=>null!=n[e.key])).map((e=>({name:n[e.key](e.value,null==i?void 0:i.total),value:e.value}))))&&void 0!==t?t:[];return r.createElement(ze,{title:l},o?r.createElement(je,null):s?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(Ae,{pieTitle:a,data:m}))}var Le={active:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"Active ".concat(q(100*e/t),"%")},offline:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"Offline ".concat(q(100*e/t),"%")}};const Te=e=>{var t,n=e.filters,a=(t={filters:n},(0,de.useQuery)([_e,t],(()=>we(t)))),l=a.data,i=a.isLoading,o=a.isError;return r.createElement(ke,{data:l,isLoading:i,isError:o,keyLabelMapping:Le,pieTitle:"".concat(q(null==l?void 0:l.total)," Locations"),cardTitle:"Sites monitored"})};var Ie=me({localUseRealData:!0,apiRoute:"operations/profile-chart",schema:k.z.object({dataset:$}),mockResponse:{dataset:[[0,17],[1,17],[2,15],[4,12],[6,13],[8,14],[10,16],[12,14],[14,20],[16,19],[18,18],[20,17],[22,22],[24,24]]}});const Ue=e=>{var t,n=(e=>(0,de.useQuery)([,e],(()=>Ie(e))))({filters:e.filters}),a=n.data,l=n.isLoading,i=n.isError,o={dataset:{source:[["time","profile"],...null!==(t=null==a?void 0:a.dataset)&&void 0!==t?t:[]]},xAxis:{},yAxis:{},series:[{type:"line",encode:{x:"time",y:"profile"},areaStyle:{}}]};return r.createElement(ze,{title:"Load Profile (KW)"},l?r.createElement(je,null):i?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(De.Z,{option:o}))};var Ne=k.z.object({dataset:$}),Me="operations/power-consumption-chart",Be=me({localUseRealData:!0,apiRoute:Me,schema:Ne,mockResponse:{dataset:[["district","consumption"],["District E",850],["District D",200],["District C",300],["District B",500],["District A",800]]}});const We=e=>{var t=(e=>(0,de.useQuery)([Me,e],(()=>Be(e))))({filters:e.filters}),n=t.data,a=t.isLoading,l=t.isError,i={dataset:{source:null==n?void 0:n.dataset},xAxis:{},yAxis:{type:"category",axisLabel:{show:!1}},series:[{type:"bar",barWidth:"20%",encode:{x:"consumption",y:"district"},label:{position:[0,-14],formatter:"{b}",show:!0}}],color:["#ffbe00"]};return r.createElement(ze,{title:"Power consumption by District"},a?r.createElement(je,null):l?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(De.Z,{option:i}))};var qe={container:{borderRadius:"16px",padding:"16px",display:"flex",flexDirection:"column",height:"100%"},content:{paddingTop:"8px",fontWeight:"bold",fontSize:"14px",lineHeight:"17px"}},Fe=e=>r.createElement(s.Z,{sx:qe.container,variant:"outlined"},r.createElement(c.Z,{sx:qe.content},e.title),e.children),He=n(1906),Ke=n(3934),Qe=n(1608),Ve=n(34),Je=n(2562),Ge=n(1655),Ye=n(1773),Xe=n(9277),$e=k.z.object({id:k.z.number(),alert_id:k.z.string(),site:k.z.string(),zone:k.z.string(),district:k.z.string(),activity:k.z.string(),status:k.z.string(),time:k.z.string()}),et=k.z.object({count:k.z.number(),next:k.z.nullable(k.z.string()),previous:k.z.nullable(k.z.string()),results:k.z.array($e)}),tt="alerts",nt=me({localUseRealData:!0,apiRoute:tt,schema:et,mockResponse:{count:100,next:null,previous:null,results:[{id:1,time:"Sun · 14 April, 04:25 AM",alert_id:"ABU-235LK",site:"Oshodi",zone:"Oshodi",district:"District A",activity:"Overloading",status:"Pending"},{id:2,time:"Sun · 14 April, 04:25 AM",alert_id:"ABU-235LK",site:"Agure",zone:"Agure",district:"District B",activity:"Downtime",status:"Resolved"},{id:3,time:"Sun · 14 April, 04:25 AM",alert_id:"ABU-235LK",site:"Terise",zone:"Terise",district:"District C",activity:"Surge",status:"Pending"},{id:4,time:"Sun · 14 April, 04:25 AM",alert_id:"ABU-235LK",site:"Valley",zone:"Valley",district:"District D",activity:"High temp.",status:"Resolved"}]}}),rt=e=>(0,de.useQuery)([tt,e],(()=>nt(e))),at=n(7984),lt=n(5840);function it(e){var t=e.menuActions,n=r.useState(null),a=(0,x.Z)(n,2),l=a[0],i=a[1],o=Boolean(l),c=()=>{i(null)};return r.createElement("div",null,r.createElement(fe,{round:!0,Icon:lt.Z,onClick:e=>{i(e.currentTarget)}}),r.createElement(at.Z,{id:"demo-positioned-menu","aria-labelledby":"demo-positioned-button",anchorEl:l,open:o,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}},t.map((e=>r.createElement(w.Z,{key:e.label,onClick:()=>{e.action(),c()}},e.label)))))}var ot=e=>{var t,n,a=e.filters,l=r.useState(4),i=(0,x.Z)(l,2),o=i[0],s=i[1],m=r.useState(0),d=(0,x.Z)(m,2),u=d[0],p=d[1],g=(0,r.useState)(a),f=(0,x.Z)(g,2),E=f[0],y=f[1],b=rt({pagination:{page:u,page_size:o},filters:E}),h=b.data,v=b.isLoading,Z=b.isError,O=null!==(t=null==h?void 0:h.results)&&void 0!==t?t:[];(0,r.useEffect)((()=>{p(0),y(a)}),[a]);var _=(0,de.useQueryClient)(),w=(0,de.useMutation)((e=>oe("alerts",e.id,{status:"completed"})),{onSuccess:()=>{_.invalidateQueries("alerts"),_.invalidateQueries("operations/cards-data")}});return v?r.createElement(je,null):Z?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(c.Z,null,r.createElement(He.Z,{component:Ke.Z},r.createElement(Qe.Z,{sx:{minWidth:650},"aria-label":"simple table"},r.createElement(Ve.Z,null,r.createElement(Je.Z,null,r.createElement(Ge.Z,null,"Date/Time"),r.createElement(Ge.Z,{align:"center"},"Alert ID"),r.createElement(Ge.Z,{align:"center"},"Site"),r.createElement(Ge.Z,{align:"center"},"Zone"),r.createElement(Ge.Z,{align:"center"},"District"),r.createElement(Ge.Z,{align:"center"},"Activity"),r.createElement(Ge.Z,{align:"center"},"Status"),r.createElement(Ge.Z,{align:"center"}))),r.createElement(Ye.Z,null,O.map((e=>r.createElement(Je.Z,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},r.createElement(Ge.Z,{component:"th",scope:"row",sx:{padding:0},align:"center"},F(e.time)),r.createElement(Ge.Z,{align:"center",sx:{paddingLeft:0,paddingRight:0}},e.alert_id),r.createElement(Ge.Z,{align:"center",sx:{padding:0}},e.site),r.createElement(Ge.Z,{align:"center",sx:{padding:0}},e.zone),r.createElement(Ge.Z,{align:"center",sx:{padding:0}},e.district),r.createElement(Ge.Z,{align:"center",sx:{padding:0}},e.activity),r.createElement(Ge.Z,{align:"center",sx:{padding:0}},e.status),r.createElement(Ge.Z,{align:"center",sx:{padding:0}},"pending"===e.status?r.createElement(it,{menuActions:[{label:"Resolved",action:()=>{w.mutate(e)}}]}):null))))))),r.createElement(Xe.Z,{rowsPerPageOptions:[4],component:"div",count:null!==(n=null==h?void 0:h.count)&&void 0!==n?n:0,rowsPerPage:o,page:u,onPageChange:(e,t)=>{p(t)},onRowsPerPageChange:e=>{s(parseInt(e.target.value,10)),p(0)}}))},ct={container:{width:"90%",maxWidth:"400px",height:"140px",borderRadius:"16px",padding:"8px",display:"flex",flexDirection:"column",alignItems:"center"},value:{paddingTop:"8px",fontWeight:"bold",fontSize:"26px",lineHeight:"48px"},label:{paddingTop:"20px",fontSize:"14px",color:"#6E7883",lineHeight:"48px"}};const st=e=>{var t=e.handler,n=e.label,a=e.cardType,l=e.filters,i=e.formatter,o=void 0===i?e=>null!=e?e.toString():"":i,m=e.field,d=t(a?{filters:l,card_type:a}:{filters:l}),u=d.data,p=d.isLoading,g=d.isError;return r.createElement(s.Z,{sx:ct.container,variant:"outlined"},g?r.createElement(c.Z,null,"Error fetching data..."):p?r.createElement(je,null):r.createElement(c.Z,{sx:ct.value},u?o(u[m]):""),r.createElement(c.Z,{sx:ct.label},n))};var mt=k.z.object({total_consumption:k.z.number().optional(),current_load:k.z.number().optional(),avg_availability:k.z.number().optional(),power_cuts:k.z.number().optional(),overloaded_dts:k.z.number().optional(),sites_under_maintenance:k.z.number().optional()}),dt="operations/cards-data",ut=me({localUseRealData:!0,apiRoute:dt,schema:mt,mockResponse:{total_consumption:32727658,current_load:2727121,avg_availability:20,power_cuts:5,overloaded_dts:10,sites_under_maintenance:2}}),pt=k.z.object({gridHours:k.z.number().optional(),tariffPlan:k.z.number().optional(),noOfOutages:k.z.number().optional(),downtime:k.z.number().optional(),revenuePerHour:k.z.number().optional(),untappedRevenue:k.z.number().optional()}),gt="operations-dashboard/cards-data",ft=me({localUseRealData:!0,apiRoute:gt,schema:pt,mockResponse:{gridHours:32727658,tariffPlan:23,noOfOutages:1019591,downtime:29019591,revenuePerHour:32271658,untappedRevenue:832658}}),Et=k.z.object({total_revenue:k.z.number().optional(),atc_losses:k.z.number().optional(),downtime_losses:k.z.number().optional(),tariff_losses:k.z.number().optional(),highest_losses:k.z.number().optional(),highest_revenue:k.z.number().optional()}),yt="finance/cards-data",bt=me({localUseRealData:!0,apiRoute:yt,schema:Et,mockResponse:{total_revenue:32727658,atc_losses:23,downtime_losses:1019591,tariff_losses:29019591,highest_losses:1e7,highest_revenue:2e7}}),ht=k.z.object({total_revenue:k.z.number().optional(),atc_losses:k.z.number().optional(),total_consumption:k.z.number().optional(),current_load:k.z.number().optional(),number_of_sites:k.z.number().optional(),number_of_users:k.z.number().optional(),pending_alerts:k.z.number().optional()}),xt="manager/cards-data",vt=me({localUseRealData:!0,apiRoute:xt,schema:ht,mockResponse:{total_revenue:32727658,atc_losses:23,total_consumption:32727658,current_load:2727121,number_of_sites:200,number_of_users:20,pending_alerts:2e3}}),Zt={OPERATIONS:e=>(0,de.useQuery)([dt,e],(()=>ut(e))),OPERATIONS_DASHBOARD:e=>(0,de.useQuery)([gt,e],(()=>ft(e))),FINANCE:e=>(0,de.useQuery)([yt,e],(()=>bt(e))),MANAGER:e=>(0,de.useQuery)([xt,e],(()=>vt(e))),PENDING_ALERTS:rt},Ot={container:{width:"90%",maxWidth:"400px",height:"140px",borderRadius:"16px",padding:"8px",display:"flex",flexDirection:"column",alignItems:"center"},value:{paddingTop:"8px",fontWeight:"bold",fontSize:"26px",lineHeight:"48px"},label:{paddingTop:"20px",fontSize:"14px",color:"#6E7883",lineHeight:"48px"}};const _t=e=>{var t=e.handler,n=e.label,a=e.cardType,l=e.filters,i=e.formatter,o=void 0===i?e=>null!=e?e.toString():"":i,m=e.field,d=t(a?{filters:l,card_type:a}:{filters:l}),u=d.data,p=d.isLoading,g=d.isError;return r.createElement(s.Z,{sx:Ot.container,variant:"outlined"},g?r.createElement(c.Z,null,"Error fetching data..."):p?r.createElement(je,null):r.createElement(c.Z,{sx:Ot.value},u?o(u[m]):""),r.createElement(c.Z,{sx:Ot.label},n))};function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jt={table:{width:"100%"},displayCenter:{display:"flex",flexDirection:"column",alignItems:"center"}},Dt=e=>{var t=e.filters;return r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:jt.displayCenter},r.createElement(st,{cardType:"total_consumption",field:"total_consumption",label:"Total Consumtion (kWh)",handler:Zt.OPERATIONS,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:jt.displayCenter},r.createElement(st,{cardType:"current_load",field:"current_load",label:"Current Load (kW)",handler:Zt.OPERATIONS,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:jt.displayCenter},r.createElement(st,{cardType:"availability",field:"avg_availability",label:"Avg. Availability (hrs)",handler:Zt.OPERATIONS,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:jt.displayCenter},r.createElement(st,{cardType:"availability",field:"power_cuts",label:"Power Cut",handler:Zt.OPERATIONS,filters:t})),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12,sx:jt.displayCenter},r.createElement(Te,{filters:t})),r.createElement(Z.ZP,{item:!0,lg:6,md:12,sm:12,sx:jt.displayCenter},r.createElement(Ue,{filters:t})),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12,sx:jt.displayCenter},r.createElement(We,{filters:t})),r.createElement(Z.ZP,{item:!0,lg:9,md:12,sm:12},r.createElement(c.Z,{sx:jt.table},r.createElement(Fe,{title:"Alert History"},r.createElement(ot,{filters:t})))),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12},r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:12,md:6,sm:6},r.createElement(st,{cardType:"overloaded_dts",field:"overloaded_dts",label:"Overloaded DTs",handler:Zt.OPERATIONS,filters:t})),r.createElement(Z.ZP,{item:!0,lg:12,md:6,sm:6},r.createElement(_t,{field:"count",label:"Sites under maintenance",handler:Zt.PENDING_ALERTS,filters:Pt(Pt({},t),{},{status:"pending"})})))))},At=["operation","finance","manager","admin"],St=[{key:"operation",value:"operation",label:"Operation"},{key:"finance",value:"finance",label:"Finance"},{key:"manager",value:"manager",label:"Manager"},{key:"admin",value:"admin",label:"Admin"}],Ct=(k.z.enum(At),k.z.enum(["car_energy"])),Rt=["energy_monitoring"],zt=(k.z.enum(Rt),k.z.object({first_name:k.z.string(),last_name:k.z.string(),companies:k.z.array(k.z.number()),employee_id:k.z.string(),email:k.z.string(),phone_number:k.z.string(),access_level:k.z.enum(At),time:k.z.string()})),kt=k.z.object({id:k.z.number(),name:k.z.string(),company_type:Ct,phone_number:k.z.string(),email:k.z.string(),address:k.z.string(),renewal_date:k.z.string(),service_type:k.z.enum(Rt)}),Lt=zt.extend({id:k.z.number(),companies:k.z.array(kt)}),Tt=(zt.extend({id:k.z.number()}),k.z.object({count:k.z.number(),next:k.z.nullable(k.z.string()),previous:k.z.nullable(k.z.string()),results:k.z.array(Lt)}));function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ut="users/me";console.log("Preparing to fetch data from API route: ".concat(Ut));var Nt=me({localUseRealData:!0,apiRoute:Ut,schema:Lt,mockResponse:{id:1,first_name:"David",last_name:"Usman",phone_number:"1",companies:[{id:1,name:"KBG Russia",company_type:"car_energy",service_type:"energy_monitoring",phone_number:"1234567890",email:"email@email.com",address:"Address",renewal_date:"2022-10-20"}],employee_id:"SM11098",email:"drakefinn@smarterise.com",access_level:"admin",time:"Sun · 14 April, 04:25 AM"}});console.log("getMe configuration:",Nt);var Mt=e=>{e.error?console.error("Error fetching user data:",e.error):console.log("User data fetched successfully:",e.data)},Bt=e=>(0,de.useQuery)([Ut],(0,I.Z)(N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Preparing to hit route"),e.next=4,Nt();case 4:return t=e.sent,Mt(t),console.log("finished to hit route",t),e.abrupt("return",t);case 10:e.prev=10,e.t0=e.catch(0),console.log("finished to hit route with Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({staleTime:1/0},e));function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ft={screenContent:{width:"90%",margin:"16px",paddingRight:"8px",display:"flex",flexDirection:"column",overflowY:"auto"}},Ht=()=>{var e=Bt().data,t=e?null==e?void 0:e.companies.map((e=>e.id)):null,n=t?qt(qt({},g),{},{companies:t}):g,a=(0,r.useState)(n),l=(0,x.Z)(a,2),i=l[0],o=l[1];return r.createElement(c.Z,{sx:Ft.screenContent},r.createElement(Oe,{filters:i,setFilters:o}),r.createElement(Dt,{filters:i}))},Kt=k.z.object({dataset:$}),Qt="operations-dashboard/energy-chart",Vt=me({localUseRealData:!0,apiRoute:Qt,schema:Kt,mockResponse:{dataset:[["month","energy"],["JAN",420],["FEB",740],["MAR",600],["APR",600],["MAY",500],["JUN",800],["JUL",840],["AUG",400],["SEP",800],["OCT",750],["NOV",890],["DEC",980]]}});const Jt=e=>{var t=(e=>(0,de.useQuery)([Qt,e],(()=>Vt(e))))({filters:e.filters}),n=t.data,a=t.isLoading,l=t.isError,i={dataset:{source:null==n?void 0:n.dataset},xAxis:{type:"category"},yAxis:{},series:[{type:"bar",barWidth:"20%",encode:{x:"month",y:"energy"}}],color:["#ffbe00"]};return r.createElement(ze,{title:"ENERGY"},a?r.createElement(je,null):l?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(De.Z,{option:i}))};var Gt="operations-dashboard/revenue-loss",Yt=me({localUseRealData:!0,apiRoute:Gt,schema:te,mockResponse:{total:2e5,dataset:[{key:"billing",value:60},{key:"collection",value:20},{key:"downtime",value:20}]}}),Xt={collection:e=>"Actual consumption ".concat(q(e)," (KWh)"),downtime:e=>"Downtime losses ".concat(q(e)," (KWh)")};const $t=e=>{var t,n=e.filters,a=(t={filters:n},(0,de.useQuery)([Gt,t],(()=>Yt(t)))),l=a.data,i=a.isLoading,o=a.isError;return r.createElement(ke,{data:l,isLoading:i,isError:o,keyLabelMapping:Xt,pieTitle:"".concat(q(null==l?void 0:l.total)," (KWh)"),cardTitle:"Potential consumption breakdown"})};var en=k.z.object({dataset:k.z.object({percentageValue:k.z.number(),humidity:k.z.number(),temperature:k.z.number()})}),tn="operations-dashboard/dt-status",nn=me({localUseRealData:!0,apiRoute:tn,schema:en,mockResponse:{dataset:{percentageValue:70,humidity:45,temperature:55}}});const rn=e=>{var t=(e=>(0,de.useQuery)([tn,e],(()=>nn(e))))({filters:e.filters}),n=t.data,a=t.isLoading,l=t.isError,i={series:[{type:"gauge",center:["50%","40%"],radius:"55%",startAngle:200,endAngle:-20,min:0,max:100,splitNumber:10,itemStyle:{color:"#FFAB91"},progress:{show:!0,width:30},pointer:{show:!1},axisLine:{lineStyle:{width:30}},axisTick:{distance:-45,splitNumber:5,lineStyle:{width:2,color:"#999"}},splitLine:{distance:-52,length:10,lineStyle:{width:3,color:"#999"}},axisLabel:{distance:-5,color:"#999",fontSize:10},anchor:{show:!1},title:{show:!1},detail:{valueAnimation:!0,width:"60%",lineHeight:40,borderRadius:8,offsetCenter:[0,"-15%"],fontSize:20,fontWeight:"bolder",formatter:"{value} %",color:"auto"},data:[{value:null==n?void 0:n.dataset.percentageValue}]}]};return r.createElement(ze,{title:"DT Status"},a?r.createElement(je,null):l?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(c.Z,null,r.createElement(c.Z,{sx:{height:"200px"}},r.createElement(De.Z,{option:i})),r.createElement(c.Z,null,"Humidity: ",null==n?void 0:n.dataset.humidity),r.createElement(c.Z,null,"Temperature: ",null==n?void 0:n.dataset.temperature)))};var an=me({localUseRealData:!0,apiRoute:"operations-dashboard/average-daily-load",schema:ee,mockResponse:{dataset:[["date","red_phase","yellow_phase","blue_phase"],[0,17,14,30],[2,15,13,50],[4,12,12,55],[6,13,11,55],[8,14,12,40],[10,16,13,30],[12,14,10,5],[14,20,12,10],[16,19,9,2],[18,18,10,4],[20,17,11,25],[22,22,10,30],[24,24,13,50]]}}),ln=me({localUseRealData:!0,apiRoute:"operations-dashboard/average-daily-voltage",schema:ee,mockResponse:{dataset:[["date","red_phase","yellow_phase","blue_phase"],[0,17,14,30],[2,15,13,50],[4,12,12,55],[6,13,11,55],[8,14,12,40],[10,16,13,30],[12,14,10,5],[14,20,12,10],[16,19,9,2],[18,18,10,4],[20,17,11,25],[22,22,10,30],[24,24,13,50]]}}),on=me({localUseRealData:!0,apiRoute:"operations-dashboard/average-daily-pf",schema:ee,mockResponse:{dataset:[["date","red_phase","yellow_phase","blue_phase"],[0,17,14,30],[2,15,13,50],[4,12,12,55],[6,13,11,55],[8,14,12,40],[10,16,13,30],[12,14,10,5],[14,20,12,10],[16,19,9,2],[18,18,10,4],[20,17,11,25],[22,22,10,30],[24,24,13,50]]}}),cn={voltage:ln,load:an,pf:on};const sn=e=>{var t=e.filters,n=r.useState("voltage"),a=(0,x.Z)(n,2),l=a[0],i=a[1],o=((e,t)=>(0,de.useQuery)(["dailyCharts",e],(()=>{var n;return(null!==(n=cn[e])&&void 0!==n?n:ln)(t)})))(l,{filters:t}),s=o.data,m=o.isLoading,d=o.isError,u={dataset:{source:null==s?void 0:s.dataset},legend:{show:!0},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{},yAxis:{},series:[{type:"line",encode:{x:"date",y:"red_phase"},smooth:!0},{type:"line",encode:{x:"date",y:"yellow_phase"},smooth:!0},{type:"line",encode:{x:"date",y:"blue_phase"},smooth:!0}]};return r.createElement(ze,{title:{voltage:"Average Daily Voltage",load:"Average Daily Load",pf:"Average Daily PF"}[l]},r.createElement(_.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l,label:"Age",onChange:e=>{i(e.target.value)}},r.createElement(w.Z,{value:"voltage"},"Average Daily Voltage"),r.createElement(w.Z,{value:"load"},"Average Daily Load"),r.createElement(w.Z,{value:"pf"},"Average Daily PF")),m?r.createElement(je,null):d?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(De.Z,{option:u}))};var mn=n(6241),dn=n(9675),un=n(6547),pn=n(9101),gn=k.z.object({insights:k.z.array(k.z.string())}),fn="operations-dashboard/key-insights",En=me({localUseRealData:!0,apiRoute:fn,schema:gn,mockResponse:{insights:["DT is overloaded between 9AM and 1PM","Recurring low PF (inspect industrial customers","No power cuts today","98% collection efficiency"]}}),yn=n(6175),bn={container:{width:"220px",height:"360px",borderRadius:"16px",padding:"16px",display:"flex",flexDirection:"column",alignItems:"center"},insights:{paddingTop:"8px",fontSize:"8px",lineHeight:"12px"}},hn=e=>{var t,n=e.filters,a=(t={filters:n},(0,de.useQuery)([fn,t],(()=>En(t)))),l=a.data,i=a.isLoading,o=a.isError;return r.createElement(ze,{title:"Key Insights"},o?r.createElement(c.Z,null,"Error fetching data..."):i?r.createElement(je,null):l&&(null==l?void 0:l.insights.length)>0?r.createElement(c.Z,{sx:bn.insights},r.createElement(mn.Z,null,l.insights.map((e=>r.createElement(dn.ZP,{key:e},r.createElement(un.Z,{sx:{minWidth:"24px"}},r.createElement(yn.Z,{sx:{color:"rgb(250 200 88)",fontSize:"18px"}})),r.createElement(pn.Z,{secondary:e,sx:{fontSize:"8px"}})))))):r.createElement(c.Z,{sx:bn.insights},"No insights"))};function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zn={screenContent:{width:"90%",margin:"16px",paddingRight:"8px",display:"flex",flexDirection:"column",overflowY:"auto"},filters:{display:"flex",width:"730px",justifyContent:"space-between"},headerIcons:{display:"flex",alignItems:"center"},cardRow:{display:"flex",justifyContent:"space-between",paddingTop:"36px"},chartsRow:{display:"flex",justifyContent:"space-between"},backButtonContainer:{display:"flex",marginTop:"10px"},displayCenter:{display:"flex",flexDirection:"column",alignItems:"center"}},On=()=>{var e=Bt().data,t=e?null==e?void 0:e.companies.map((e=>e.id)):null,n=t?vn(vn({},g),{},{companies:t}):g,a=(0,r.useState)(n),l=(0,x.Z)(a,2),i=l[0],o=l[1];return r.createElement(c.Z,{sx:Zn.screenContent},r.createElement(Oe,{filters:i,setFilters:o}),r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:Zn.displayCenter},r.createElement(st,{cardType:"availability",field:"gridHours",label:"Uptime",handler:Zt.OPERATIONS_DASHBOARD,filters:i,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:Zn.displayCenter},r.createElement(st,{cardType:"tariffPlan",field:"tariffPlan",label:"Energy Consumption",handler:Zt.OPERATIONS_DASHBOARD,filters:i,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:Zn.displayCenter},r.createElement(st,{cardType:"availability",field:"noOfOutages",label:"No. of Outages",handler:Zt.OPERATIONS_DASHBOARD,filters:i,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:Zn.displayCenter},r.createElement(st,{cardType:"downtime",field:"downtime",label:"Current Load",handler:Zt.OPERATIONS_DASHBOARD,filters:i,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12,sx:Zn.displayCenter},r.createElement($t,{filters:i})),r.createElement(Z.ZP,{item:!0,lg:6,md:12,sm:12,sx:Zn.displayCenter},r.createElement(Jt,{filters:i})),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12,sx:Zn.displayCenter},r.createElement(rn,{filters:i})),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12},r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:12,md:6,sm:6},r.createElement(st,{cardType:"revenuePerHour",field:"revenuePerHour",label:"Revenue/Hour",handler:Zt.OPERATIONS_DASHBOARD,filters:i,formatter:e=>"N".concat(B(e))})),r.createElement(Z.ZP,{item:!0,lg:12,md:6,sm:6},r.createElement(st,{cardType:"untappedRevenue",field:"untappedRevenue",label:"Untapped Revenue",handler:Zt.OPERATIONS_DASHBOARD,filters:i,formatter:e=>"N".concat(B(e))})))),r.createElement(Z.ZP,{item:!0,lg:6,md:12,sm:12,sx:Zn.displayCenter},r.createElement(sn,{filters:i})),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12,sx:Zn.displayCenter},r.createElement(hn,{filters:i}))))},_n="finance/customer-breakdown",wn=me({localUseRealData:!0,apiRoute:_n,schema:te,mockResponse:{total:72e4,dataset:[{key:"paying",value:288e3},{key:"defaulting",value:432e3}]}}),Pn={paying:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"Good Performance ".concat(q(100*e/t),"%")},defaulting:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"Bad Performance ".concat(q(100*e/t),"%")}};const jn=e=>{var t,n=e.filters,a=(t={filters:n},(0,de.useQuery)([_n,t],(()=>wn(t)))),l=a.data,i=a.isLoading,o=a.isError;return r.createElement(ke,{data:l,isLoading:i,isError:o,keyLabelMapping:Pn,pieTitle:"".concat(q(null==l?void 0:l.total)," Customers"),cardTitle:"Customer Breakdown"})};var Dn=k.z.object({dataset:$}),An="finance/performance",Sn=me({localUseRealData:!0,apiRoute:An,schema:Dn,mockResponse:{dataset:[["day","collection","billedEnergy"],[0,17,14],[2,15,13],[4,12,12],[6,13,11],[8,14,12],[10,16,13],[12,14,10],[14,20,12],[16,19,9],[18,18,10],[20,17,11],[22,22,10],[24,24,13]]}});const Cn=e=>{var t=(e=>(0,de.useQuery)([An,e],(()=>Sn(e))))({filters:e.filters}),n=t.data,a=t.isLoading,l=t.isError,i={dataset:{source:null==n?void 0:n.dataset},xAxis:{},yAxis:{},series:[{type:"line",encode:{x:"day",y:"collection"},areaStyle:{}},{type:"line",encode:{x:"day",y:"billedEnergy"},areaStyle:{}}]};return r.createElement(ze,{title:"Financial Performance"},a?r.createElement(je,null):l?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(De.Z,{option:i}))};var Rn=k.z.object({dataset:$}),zn="finance/revenue",kn=me({localUseRealData:!0,apiRoute:zn,schema:Rn,mockResponse:{dataset:[["district","revenue"],["District E",850],["District D",200],["District C",300],["District B",500],["District A",800]]}});const Ln=e=>{var t=(e=>(0,de.useQuery)([zn,e],(()=>kn(e))))({filters:e.filters}),n=t.data,a=t.isLoading,l=t.isError,i={dataset:{source:null==n?void 0:n.dataset},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{},yAxis:{type:"category",axisLabel:{show:!1}},series:[{type:"bar",barWidth:"20%",encode:{x:"revenue",y:"district"},label:{position:[0,-14],formatter:"{b}",show:!0}}],color:["#ffbe00"]};return r.createElement(ze,{title:"Revenue"},a?r.createElement(je,null):l?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(De.Z,{option:i}))};k.z.object({site:k.z.number(),subscription:k.z.string(),amount_billed:k.z.number(),amount_bought:k.z.number(),days:k.z.number(),time:k.z.string()});var Tn=k.z.object({id:k.z.number(),site_name:k.z.string(),site:k.z.number(),subscription:k.z.string(),amount_billed:k.z.number(),amount_bought:k.z.number(),days:k.z.number(),time:k.z.string()}),In=k.z.object({count:k.z.number(),next:k.z.nullable(k.z.string()),previous:k.z.nullable(k.z.string()),results:k.z.array(Tn)}),Un="transaction-history",Nn=me({localUseRealData:!0,apiRoute:Un,schema:In,mockResponse:{count:100,next:null,previous:null,results:[{id:1,time:"Sun · 14 April, 04:25 AM",site_name:"Eko Hotel",site:1,subscription:"Paid",amount_billed:1e8,amount_bought:5e7,days:2},{id:2,time:"Sun · 14 April, 04:25 AM",site_name:"Head Office",site:2,subscription:"Paid",amount_billed:3e8,amount_bought:15e7,days:3},{id:3,time:"Sun · 14 April, 04:25 AM",site_name:"Apapa",site:3,subscription:"Pending",amount_billed:1e7,amount_bought:5e6,days:2},{id:4,time:"Sun · 14 April, 04:25 AM",site_name:"Surulere",site:4,subscription:"Paid",amount_billed:3e6,amount_bought:15e5,days:3}]}}),Mn=n(4922),Bn=n(9074);const Wn=e=>{var t=e.setOpen,n=e.open,a=e.title,l=e.children;return r.createElement(Mn.Z,{onClose:()=>{t(!1)},open:n},r.createElement(Bn.Z,null,a),l)};var qn=n(7536),Fn=n(3123),Hn=n(5597),Kn=e=>{var t=e.name,n=e.control,a=e.label,l=e.rules,i=e.errors,o=e.type,s=e.multiline,m=e.rows,d=e.disabled,u=void 0!==d&&d;return r.createElement(qn.Qr,{name:t,control:n,rules:l,render:e=>{var n=e.field;return r.createElement(r.Fragment,null,r.createElement(S.Z,(0,Fn.Z)({},n,{label:a,type:null!=o?o:"text",multiline:s,rows:m,disabled:u})),r.createElement(Hn.B,{errors:i,name:t,render:e=>{var t=e.message;return r.createElement(c.Z,{sx:{color:"red"}},t)}}))}})},Qn=e=>{var t=e.name,n=e.control,a=e.label,l=e.rules,i=e.errors,o=e.options;return r.createElement(qn.Qr,{name:t,control:n,rules:l,render:e=>{var n=e.field;return r.createElement(P.Z,null,r.createElement(O.Z,null,a),r.createElement(_.Z,(0,Fn.Z)({},n,{label:a}),o.map((e=>r.createElement(w.Z,{key:e.key,value:e.value},e.label)))),r.createElement(Hn.B,{errors:i,name:t,render:e=>{var t=e.message;return r.createElement(c.Z,{sx:{color:"red"}},t)}}))}})},Vn=n(6878),Jn=e=>{var t=e.name,n=e.control,a=e.label,l=e.rules,i=e.errors;return r.createElement(qn.Qr,{name:t,control:n,rules:l,render:e=>{var n=e.field;return r.createElement(r.Fragment,null,r.createElement(C._,{dateAdapter:D.H},r.createElement(A.M,(0,Fn.Z)({},n,{label:a,renderInput:e=>r.createElement(S.Z,e)}))),r.createElement(Hn.B,{errors:i,name:t,render:e=>{var t=e.message;return r.createElement(c.Z,{sx:{color:"red"}},t)}}))}})};function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xn(e){var t,n=e.entity,a=e.afterSubmit,l=e.filters,i=(0,de.useQueryClient)(),o=(0,Vn.Ds)().enqueueSnackbar,s=ge({filters:l}).data,m=Yn({},n),u=(0,qn.cI)({defaultValues:m}),p=u.control,g=u.handleSubmit,E=u.formState.errors,y=(0,de.useMutation)((e=>ie("transaction-history",Yn({},e))),{onSuccess:()=>{i.invalidateQueries("transaction-history"),o("Transaction has been updated!",{variant:"success"}),a()},onError:()=>{o("Error while trying to update transaction!",{variant:"error"})}}),b=e=>{y.mutate(Yn({},e))};return r.createElement(c.Z,{sx:{width:"300px",padding:"16px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.createElement("form",{onSubmit:g(b)},r.createElement(c.Z,{sx:{display:"flex",flexDirection:"column"}},r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"subscription",label:"Transaction name",errors:E,control:p,rules:{required:f},options:["Collection report","Reconciliation Report"].map((e=>({key:e,value:e,label:e})))})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"amount_billed",label:"Amount billed",type:"number",errors:E,control:p,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"amount_bought",label:"Amount collected",type:"number",errors:E,control:p,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"days",label:"Energy billed",type:"number",errors:E,control:p,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"site",label:"Site",errors:E,control:p,rules:{required:f},options:null!==(t=null==s?void 0:s.results.map((e=>({key:e.id,value:e.id,label:e.name}))))&&void 0!==t?t:[]})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Jn,{name:"time",label:"Date",errors:E,control:p,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(d.Z,{variant:"contained",onClick:g(b)},"Submit")))))}var $n=e=>{var t,n,a,l=e.filters,i=r.useState(!1),o=(0,x.Z)(i,2),s=o[0],m=o[1],d=r.useState(null),u=(0,x.Z)(d,2),p=u[0],g=u[1],f=r.useState(5),E=(0,x.Z)(f,2),y=E[0],b=E[1],h=r.useState(0),v=(0,x.Z)(h,2),Z=v[0],O=v[1],_=(0,r.useState)(l),w=(0,x.Z)(_,2),P=w[0],j=w[1],D=(a={pagination:{page:Z,page_size:y},filters:P},(0,de.useQuery)([Un,a],(()=>Nn(a)))),A=D.data,S=D.isLoading,C=D.isError,R=null!==(t=null==A?void 0:A.results)&&void 0!==t?t:[],z=Q(R,p);(0,r.useEffect)((()=>{O(0),j(l)}),[l]);var k=(0,de.useQueryClient)(),L=(0,de.useMutation)((e=>ce("transaction-history",e)),{onSuccess:()=>{k.invalidateQueries("transaction-history")}});return S?r.createElement(je,null):C?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(c.Z,null,r.createElement(He.Z,{component:Ke.Z},r.createElement(Qe.Z,{sx:{minWidth:650},"aria-label":"simple table"},r.createElement(Ve.Z,null,r.createElement(Je.Z,null,r.createElement(Ge.Z,{align:"center"},"Site"),r.createElement(Ge.Z,{align:"center"},"Name"),r.createElement(Ge.Z,{align:"center"},"Date/Time"),r.createElement(Ge.Z,{align:"center"},"Amount Billed"),r.createElement(Ge.Z,{align:"center"},"Amount Collected"),r.createElement(Ge.Z,{align:"center"},"Energy billed"),r.createElement(Ge.Z,{align:"center"}))),r.createElement(Ye.Z,null,null==R?void 0:R.map((e=>r.createElement(Je.Z,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},r.createElement(Ge.Z,{align:"center",component:"th",scope:"row",sx:{padding:0}},e.site_name),r.createElement(Ge.Z,{align:"center",sx:{paddingLeft:0,paddingRight:0}},e.subscription),r.createElement(Ge.Z,{align:"center",sx:{padding:0}},F(e.time)),r.createElement(Ge.Z,{align:"center",sx:{padding:0}},B(e.amount_billed)),r.createElement(Ge.Z,{align:"center",sx:{padding:0}},B(e.amount_bought)),r.createElement(Ge.Z,{align:"center",sx:{padding:0}},B(e.days)),r.createElement(Ge.Z,{align:"right",sx:{padding:0}},r.createElement(it,{menuActions:[{label:"Update",action:()=>{g(e.id),m(!0)}},{label:"Delete",action:()=>{L.mutate(e.id)}}]})))))))),r.createElement(Xe.Z,{rowsPerPageOptions:[5],component:"div",count:null!==(n=null==A?void 0:A.count)&&void 0!==n?n:0,rowsPerPage:y,page:Z,onPageChange:(e,t)=>{O(t)},onRowsPerPageChange:e=>{b(parseInt(e.target.value,10)),O(0)}}),r.createElement(Wn,{open:s,setOpen:m,title:"Update transaction"},null!=z?r.createElement(Xn,{entity:z,afterSubmit:()=>{m(!1)},filters:l}):"No transaction selected"))},er={table:{width:"100%"},displayCenter:{display:"flex",flexDirection:"column",alignItems:"center"}},tr=e=>{var t=e.filters;return r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:er.displayCenter},r.createElement(st,{cardType:"atc_losses",field:"total_revenue",label:"Total Revenue (N)",handler:Zt.FINANCE,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:er.displayCenter},r.createElement(st,{cardType:"atc_losses",field:"atc_losses",label:"ATC&C Losses (%)",handler:Zt.FINANCE,filters:t,formatter:e=>B(100*(null!=e?e:0),1)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:er.displayCenter},r.createElement(st,{cardType:"downtime_losses",field:"downtime_losses",label:"Downtime Losses (N)",handler:Zt.FINANCE,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:er.displayCenter},r.createElement(st,{cardType:"tariff_losses",field:"tariff_losses",label:"Tariff Losses (N)",handler:Zt.FINANCE,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12,sx:er.displayCenter},r.createElement(jn,{filters:t})),r.createElement(Z.ZP,{item:!0,lg:6,md:12,sm:12,sx:er.displayCenter},r.createElement(Cn,{filters:t})),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12,sx:er.displayCenter},r.createElement(Ln,{filters:t})),r.createElement(Z.ZP,{item:!0,lg:9,md:12,sm:12},r.createElement(c.Z,{sx:er.table},r.createElement(Fe,{title:"Transaction History"},r.createElement($n,{filters:t})))),r.createElement(Z.ZP,{item:!0,lg:3,md:12,sm:12},r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:12,md:6,sm:6},r.createElement(st,{cardType:"highest_losses",field:"highest_losses",label:"Revenue/hour (NGN)",handler:Zt.FINANCE,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:12,md:6,sm:6},r.createElement(st,{cardType:"highest_revenue",field:"highest_revenue",label:"Revenue/DT (NGN)",handler:Zt.FINANCE,filters:t,formatter:e=>B(e)})))))};function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ar={screenContent:{width:"90%",margin:"16px",paddingRight:"8px",display:"flex",flexDirection:"column",overflowY:"auto"}},lr=()=>{var e=Bt().data,t=e?null==e?void 0:e.companies.map((e=>e.id)):null,n=t?rr(rr({},g),{},{companies:t}):g,a=(0,r.useState)(n),l=(0,x.Z)(a,2),i=l[0],o=l[1];return r.createElement(c.Z,{sx:ar.screenContent},r.createElement(Oe,{filters:i,setFilters:o}),r.createElement(tr,{filters:i}))},ir=n(8742),or={drawerContainer:{width:E,flexShrink:0,"& .MuiDrawer-paper":{boxSizing:"border-box",display:"flex",alignItems:"center"},overflowX:"none"},logo:{cursor:"pointer",width:E},button:{base:{width:E,justifyContent:"flex-start",paddingLeft:"25px",marginTop:"15px",marginBottom:"15px",borderRadius:"32px","&:hover":{backgroundColor:"#b6b6b6",borderRadius:"32px"},fontSize:"16px",fontWeight:"500",lineHeight:"19px",letterSpacing:"0.01em",textAlign:"left",color:"#6E7883"},selected:{backgroundColor:"#929292",borderRadius:"32px"}}},cr=e=>{var t=e.buttonDefinitions,n=(0,o.s0)(),a=(0,o.TH)();return r.createElement(ir.ZP,{sx:or.drawerContainer,variant:"permanent",anchor:"left"},r.createElement("img",{src:"logo.png",alt:"Smarterise",style:or.logo,onClick:()=>{n("/")}}),t.map((e=>r.createElement(d.Z,{key:e.id,variant:"text",sx:[or.button.base,e.path===a.pathname&&or.button.selected],startIcon:e.icon,onClick:()=>{n(e.path)}},e.label))))},sr=n(2981),mr=n(6111),dr=n(3115),ur=[{id:1,label:"Home",icon:r.createElement(sr.Z,null),path:"/operations/home"},{id:2,label:"Site",icon:r.createElement(mr.Z,null),path:"/operations/site"},{id:3,label:"Activity Log",icon:r.createElement(dr.Z,null),path:"/operations/activityLog"},{id:4,label:"My Account",icon:r.createElement(ye.Z,null),path:"/account"}],pr=()=>Bt().isLoading?r.createElement(je,null):r.createElement(c.Z,{sx:{display:"flex"}},r.createElement(cr,{buttonDefinitions:ur}),r.createElement(o.j3,null)),gr=[{id:1,label:"Home",icon:r.createElement(sr.Z,null),path:"/finance/home"},{id:2,label:"Transaction",icon:r.createElement(mr.Z,null),path:"/finance/transaction"},{id:3,label:"My Account",icon:r.createElement(ye.Z,null),path:"/account"}],fr=()=>Bt().isLoading?r.createElement(je,null):r.createElement(c.Z,{sx:{display:"flex"}},r.createElement(cr,{buttonDefinitions:gr}),r.createElement(o.j3,null)),Er=n(5604),yr="users",br=me({localUseRealData:!0,apiRoute:yr,schema:Tt,mockResponse:{count:100,next:null,previous:null,results:[{id:1,first_name:"David",last_name:"Usman",phone_number:"1",companies:[{id:1,name:"KBG Russia",company_type:"car_energy",service_type:"energy_monitoring",phone_number:"1234567890",email:"email@email.com",address:"Address",renewal_date:"2022-10-20"}],employee_id:"SM11098",email:"drakefinn@smarterise.com",access_level:"operation",time:"Sun · 14 April, 04:25 AM"},{id:2,first_name:"Daniel",last_name:"Osas",phone_number:"2",companies:[{id:2,name:"KBG Russia",company_type:"car_energy",service_type:"energy_monitoring",phone_number:"1234567890",email:"email@email.com",address:"Address",renewal_date:"2022-10-20"}],employee_id:"SM23490",email:"godwinife@smarterise.com",access_level:"admin",time:"Sun · 14 April, 04:25 AM"},{id:3,first_name:"Emmanuel",last_name:"Akpabio",phone_number:"3",companies:[{id:3,name:"KBG Russia",company_type:"car_energy",service_type:"energy_monitoring",phone_number:"1234567890",email:"email@email.com",address:"Address",renewal_date:"2022-10-20"}],employee_id:"SM67891",email:"leosimon@smarterise.com",access_level:"finance",time:"Sun · 14 April, 04:25 AM"},{id:4,first_name:"Jerry",last_name:"Ubrahim",phone_number:"4",companies:[{id:4,name:"KBG Russia",company_type:"car_energy",service_type:"energy_monitoring",phone_number:"1234567890",email:"email@email.com",address:"Address",renewal_date:"2022-10-20"}],employee_id:"SM23456",email:"tedcyrus@smarterise.com",access_level:"manager",time:"Sun · 14 April, 04:25 AM"}]}}),hr=e=>"".concat(e.first_name," ").concat(e.last_name),xr={container:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},headerIcons:{display:"flex",width:"100%",justifyContent:"flex-end",alignItems:"center",marginTop:"46px",marginBottom:"100px",paddingRight:"130px"},loginCard:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:568,minWidth:568,height:436,padding:"32px",borderRadius:"32px",borderColor:"#77777740"},content:{padding:"0px 96px 0px 96px",display:"flex",flexDirection:"column",justifyContent:"space-between",width:"343px",height:"100%"},editProfile:{width:"100%",display:"flex",justifyContent:"flex-end",textDecoration:"underline",color:"#666666"},profileHeader:{display:"flex",justifyContent:"space-around",width:"100%"},idAndRole:{display:"flex",flexDirection:"column",justifyContent:"space-around"},profilePicture:{height:"100px",width:"100px"},id:{fontWeight:"bold",marginLeft:"10px"},textfield:{width:"100%"}},vr=()=>{var e,t,n=(0,o.s0)(),a=Bt(),l=a.data,i=a.isLoading,m=a.isError;return null==l||i?r.createElement(je,null):m?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(c.Z,{sx:xr.container},r.createElement(c.Z,{sx:xr.headerIcons},r.createElement(he,null)),r.createElement(s.Z,{sx:xr.loginCard,variant:"outlined"},r.createElement(c.Z,{sx:xr.content},r.createElement(c.Z,{sx:xr.profileHeader},r.createElement(Er.Z,{sx:xr.profilePicture,image:"bear.png"}),r.createElement(c.Z,{sx:xr.idAndRole},r.createElement(c.Z,null,"Role: ".concat(null==l?void 0:l.access_level)))),r.createElement(S.Z,{sx:xr.textfield,id:"name",type:"text",label:"Name",value:hr(l)}),r.createElement(S.Z,{sx:xr.textfield,id:"email",type:"text",label:"Email Address",value:null!==(e=null==l?void 0:l.email)&&void 0!==e?e:""}),r.createElement(S.Z,{sx:xr.textfield,id:"company",type:"text",label:"Company",value:null!==(t=null==l?void 0:l.companies.map((e=>e.name)).join(", "))&&void 0!==t?t:""})),r.createElement(d.Z,{onClick:()=>{n(-1)}},"Back")))},Zr=n(4735),Or=n(939),_r=n(6877),wr=n(4978),Pr=n(8159),jr={container:{background:"#F9F9F9",borderColor:"#E5E5E5"}},Dr=e=>{var t=e.label,n=(0,r.useState)(null),a=(0,x.Z)(n,2),l=a[0],i=a[1];return r.createElement(c.Z,{sx:jr.container},r.createElement(C._,{dateAdapter:D.H},r.createElement(A.M,{label:t,value:l,onChange:e=>{i(e)},renderInput:e=>r.createElement(S.Z,e)})))},Ar=k.z.object({id:k.z.number(),alert_id:k.z.string(),site:k.z.string(),zone:k.z.string(),district:k.z.string(),activity:k.z.string(),time:k.z.string(),status:k.z.string()}),Sr=k.z.object({count:k.z.number(),next:k.z.nullable(k.z.string()),previous:k.z.nullable(k.z.string()),results:k.z.array(Ar)}),Cr="event-logs",Rr=me({localUseRealData:!0,apiRoute:Cr,schema:Sr,mockResponse:{count:100,next:null,previous:null,results:[{id:1,alert_id:"ABU-235LK",site:"Oshodi",zone:"Oshodi",district:"District A",activity:"Overloading",time:"04:25 AM Sun - 14 April, 2022",status:"Resolved"},{id:2,alert_id:"ABU-235LK",site:"Agure",zone:"Agure",district:"District B",activity:"Downtime",time:"04:25 AM Sun - 14 April, 2022",status:"Resolved"},{id:3,alert_id:"ABU-235LK",site:"Terise",zone:"Terise",district:"District C",activity:"Surge",time:"04:25 AM Sun - 14 April, 2022",status:"Resolved"},{id:4,alert_id:"ABU-235LK",site:"Valley",zone:"Valley",district:"District D",activity:"High temperature",time:"04:25 AM Sun - 14 April, 2022",status:"Unresolved"}]}}),zr=e=>{var t,n,a,l=e.filters,i=r.useState(5),o=(0,x.Z)(i,2),s=o[0],m=o[1],d=r.useState(0),u=(0,x.Z)(d,2),p=u[0],g=u[1],f=(0,r.useState)(l),E=(0,x.Z)(f,2),y=E[0],b=E[1],h=(a={pagination:{page:p,page_size:s},filters:y},(0,de.useQuery)([Cr,a],(()=>Rr(a)))),v=h.data,Z=h.isLoading,O=h.isError,_=null!==(t=null==v?void 0:v.results)&&void 0!==t?t:[];return(0,r.useEffect)((()=>{g(0),b(l)}),[l]),Z?r.createElement(je,null):O?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(c.Z,null,r.createElement(He.Z,{component:Ke.Z},r.createElement(Qe.Z,{sx:{minWidth:650},"aria-label":"simple table"},r.createElement(Ve.Z,null,r.createElement(Je.Z,null,r.createElement(Ge.Z,null,"Time/Date"),r.createElement(Ge.Z,{align:"right"},"Alert ID"),r.createElement(Ge.Z,{align:"right"},"Site"),r.createElement(Ge.Z,{align:"right"},"Zone"),r.createElement(Ge.Z,{align:"right"},"District"),r.createElement(Ge.Z,{align:"right"},"Activity"),r.createElement(Ge.Z,{align:"right"},"Status"))),r.createElement(Ye.Z,null,_.map((e=>r.createElement(Je.Z,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},r.createElement(Ge.Z,{component:"th",scope:"row"},F(e.time)),r.createElement(Ge.Z,{align:"right"},e.alert_id),r.createElement(Ge.Z,{align:"right"},e.site),r.createElement(Ge.Z,{align:"right"},e.zone),r.createElement(Ge.Z,{align:"right"},e.district),r.createElement(Ge.Z,{align:"right"},e.activity),r.createElement(Ge.Z,{align:"right"},e.status))))))),r.createElement(Xe.Z,{rowsPerPageOptions:[15],component:"div",count:null!==(n=null==v?void 0:v.count)&&void 0!==n?n:0,rowsPerPage:s,page:p,onPageChange:(e,t)=>{g(t)},onRowsPerPageChange:e=>{m(parseInt(e.target.value,10)),g(0)}}))},kr=k.z.object({id:k.z.number(),alert_id:k.z.string(),modified_by:k.z.string(),employee_id:k.z.string(),email_address:k.z.string(),time:k.z.string()}),Lr=k.z.object({count:k.z.number(),next:k.z.nullable(k.z.string()),previous:k.z.nullable(k.z.string()),results:k.z.array(kr)}),Tr="user-logs",Ir=me({localUseRealData:!0,apiRoute:Tr,schema:Lr,mockResponse:{count:100,next:null,previous:null,results:[{id:1,alert_id:"A34509",modified_by:"David Usman",employee_id:"SM11098",email_address:"drakefinn@smarterise.com",time:"04:25 AM Sun - 14 April, 2022"},{id:2,alert_id:"A34509",modified_by:"Daniel Osas",employee_id:"SM23490",email_address:"godwinife@smarterise.com",time:"04:25 AM Sun - 14 April, 2022"},{id:3,alert_id:"A34509",modified_by:"Emmanuel Akpabio",employee_id:"SM67891",email_address:"leosimon@smarterise.com",time:"04:25 AM Sun - 14 April, 2022"},{id:4,alert_id:"A34509",modified_by:"Jerry Ubrahim",employee_id:"SM23456",email_address:"tedcyrus@smarterise.com",time:"04:25 AM Sun - 14 April, 2022"}]}}),Ur=e=>{var t,n,a,l=e.filters,i=r.useState(5),o=(0,x.Z)(i,2),s=o[0],m=o[1],d=r.useState(0),u=(0,x.Z)(d,2),p=u[0],g=u[1],f=(0,r.useState)(l),E=(0,x.Z)(f,2),y=E[0],b=E[1],h=(a={pagination:{page:p,page_size:s},filters:y},(0,de.useQuery)([Tr,a],(()=>Ir(a)))),v=h.data,Z=h.isLoading,O=h.isError,_=null!==(t=null==v?void 0:v.results)&&void 0!==t?t:[];return(0,r.useEffect)((()=>{g(0),b(l)}),[l]),Z?r.createElement(je,null):O?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(c.Z,null,r.createElement(He.Z,{component:Ke.Z},r.createElement(Qe.Z,{sx:{minWidth:650},"aria-label":"simple table"},r.createElement(Ve.Z,null,r.createElement(Je.Z,null,r.createElement(Ge.Z,null,"Alert ID"),r.createElement(Ge.Z,{align:"right"},"Time/Date"),r.createElement(Ge.Z,{align:"right"},"Modified by"),r.createElement(Ge.Z,{align:"right"},"Employee ID"),r.createElement(Ge.Z,{align:"right"},"Email address"))),r.createElement(Ye.Z,null,_.map((e=>r.createElement(Je.Z,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},r.createElement(Ge.Z,{component:"th",scope:"row"},e.alert_id),r.createElement(Ge.Z,{align:"right"},F(e.time)),r.createElement(Ge.Z,{align:"right"},e.modified_by),r.createElement(Ge.Z,{align:"right"},e.employee_id),r.createElement(Ge.Z,{align:"right"},e.email_address))))))),r.createElement(Xe.Z,{rowsPerPageOptions:[15],component:"div",count:null!==(n=null==v?void 0:v.count)&&void 0!==n?n:0,rowsPerPage:s,page:p,onPageChange:(e,t)=>{g(t)},onRowsPerPageChange:e=>{m(parseInt(e.target.value,10)),g(0)}}))},Nr=["children","value","index"];function Mr(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function Br(e){var t=e.children,n=e.value,a=e.index,i=(0,l.Z)(e,Nr);return r.createElement("div",(0,Fn.Z)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},i),n===a&&r.createElement(c.Z,null,r.createElement(_r.Z,null,t)))}function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fr={screenContent:{width:"100%",padding:"42px 65px 65px 32px",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",width:"100%",height:"56px"},filters:{display:"flex",width:"100%",justifyContent:"space-between",margin:"20px"},headerIcons:{display:"flex",alignItems:"center"},cardRow:{display:"flex",justifyContent:"space-between",paddingTop:"36px"}},Hr=()=>{var e,t,n=r.useState(0),a=(0,x.Z)(n,2),l=a[0],i=a[1],o=Bt().data,s=o?null==o?void 0:o.companies.map((e=>e.id)):null,m=s?qr(qr({},g),{},{companies:s}):g,d=(0,r.useState)(m),u=(0,x.Z)(d,2),f=u[0],E=u[1],y=e=>t=>{E((n=>qr(qr({},n),{},{[e]:t})))};return r.createElement(c.Z,{sx:Fr.screenContent},r.createElement(c.Z,{sx:Fr.header},r.createElement(S.Z,{sx:{width:"500px"},id:"site_search",type:"text",placeholder:"Search for asset name, site and more",value:f.search,onChange:e=>{var t=e.target.value;E((e=>qr(qr({},e),{},{search:t})))}}),r.createElement(c.Z,{sx:Fr.headerIcons},r.createElement(he,null))),r.createElement(c.Z,{sx:Fr.filters},r.createElement(c.Z,{sx:{borderBottom:1,borderColor:"divider"}},r.createElement(Zr.Z,{value:l,onChange:(e,t)=>{i(t)},"aria-label":"basic tabs example"},r.createElement(Or.Z,(0,Fn.Z)({label:"Event Logs"},Mr(0))),r.createElement(Or.Z,(0,Fn.Z)({label:"Alerts"},Mr(1))),r.createElement(Or.Z,(0,Fn.Z)({label:"User Logs"},Mr(2))),r.createElement(Or.Z,(0,Fn.Z)({label:"Raw data"},Mr(3))))),r.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",width:"400px"}},r.createElement(z,{label:"Start Date",value:null!==(e=f.start_date)&&void 0!==e?e:null,setValue:y("start_date")}),r.createElement(z,{label:"End Date",value:null!==(t=f.end_date)&&void 0!==t?t:null,setValue:y("end_date")}))),r.createElement(c.Z,null,r.createElement(Br,{value:l,index:0},r.createElement(zr,{filters:f})),r.createElement(Br,{value:l,index:1},r.createElement(ot,{filters:f})),r.createElement(Br,{value:l,index:2},r.createElement(Ur,{filters:f})),r.createElement(Br,{value:l,index:3},r.createElement(Fe,{title:"Choose Details"},r.createElement(Dr,{label:"Start Date"}),r.createElement(Dr,{label:"End Date"}),r.createElement(_r.Z,null,"Packaged type"),r.createElement(wr.Z,{control:r.createElement(Pr.Z,{checked:!0,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Power (KW)"}),r.createElement(wr.Z,{control:r.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Frequency (Hz)"}),r.createElement(wr.Z,{control:r.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Voltage (V)"}),r.createElement(wr.Z,{control:r.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Phase Voltage"}),r.createElement(wr.Z,{control:r.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Status"}),r.createElement(wr.Z,{control:r.createElement(Pr.Z,{checked:!0,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Import Active Energy"}),r.createElement(wr.Z,{control:r.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Reactive Power"}),r.createElement(wr.Z,{control:r.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Frequent"}),r.createElement(wr.Z,{control:r.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Load Type"}),r.createElement(wr.Z,{control:r.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Current K Factor"}),r.createElement(c.Z,{sx:{display:"flex",justifyContent:"center"}},r.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",width:"250px"}},r.createElement(p,{label:"Cancel",onClick:()=>{}}),r.createElement(p,{disabled:!0,label:"Download",onClick:()=>{}})))))))},Kr=n(2373),Qr=e=>{var t,n,a=e.filters,l=(0,o.s0)(),i=r.useState(7),s=(0,x.Z)(i,2),m=s[0],d=s[1],u=r.useState(0),p=(0,x.Z)(u,2),g=p[0],f=p[1],E=(0,r.useState)(a),y=(0,x.Z)(E,2),b=y[0],h=y[1],v=ge({pagination:{page:g,page_size:m},filters:b}),Z=v.data,O=v.isLoading,_=v.isError,w=null!==(t=null==Z?void 0:Z.results)&&void 0!==t?t:[];return(0,r.useEffect)((()=>{f(0),h(a)}),[a]),O?r.createElement(je,null):_?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(c.Z,null,r.createElement(He.Z,{component:Ke.Z},r.createElement(Qe.Z,{sx:{minWidth:650},"aria-label":"simple table"},r.createElement(Ve.Z,null,r.createElement(Je.Z,null,r.createElement(Ge.Z,null,"Asset name"),r.createElement(Ge.Z,{align:"center"},"Site"),r.createElement(Ge.Z,{align:"center"},"Asset Type"),r.createElement(Ge.Z,{align:"center"},"Asset co-ordinate"),r.createElement(Ge.Z,{align:"center"},"Asset capacity (kVA)"),r.createElement(Ge.Z,{align:"center"},"Time/Date"),r.createElement(Ge.Z,{align:"center"}))),r.createElement(Ye.Z,null,w.map((e=>r.createElement(Je.Z,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},r.createElement(Ge.Z,{align:"center",component:"th",scope:"row"},e.asset_name),r.createElement(Ge.Z,{align:"center"},e.name),r.createElement(Ge.Z,{align:"center"},e.asset_type),r.createElement(Ge.Z,{align:"center"},e.asset_co_ordinate),r.createElement(Ge.Z,{align:"center"},e.asset_capacity),r.createElement(Ge.Z,{align:"center"},F(e.time)),r.createElement(Ge.Z,{align:"center"},r.createElement(fe,{round:!0,Icon:Kr.Z,onClick:()=>l("/operations/dashboard")})))))))),r.createElement(Xe.Z,{rowsPerPageOptions:[15],component:"div",count:null!==(n=null==Z?void 0:Z.count)&&void 0!==n?n:0,rowsPerPage:m,page:g,onPageChange:(e,t)=>{f(t)},onRowsPerPageChange:e=>{d(parseInt(e.target.value,10)),f(0)}}))};function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gr={header:{display:"flex",justifyContent:"space-between",width:"100%",height:"56px"},filters:{display:"flex",width:"100%",justifyContent:"end",margin:"20px"},headerIcons:{display:"flex",alignItems:"center"}},Yr=e=>{var t,n,a=e.filters,l=e.setFilters,i=e=>t=>{l((n=>Jr(Jr({},n),{},{[e]:t})))};return r.createElement(c.Z,null,r.createElement(c.Z,{sx:Gr.header},r.createElement(S.Z,{sx:{width:"500px"},id:"site_search",type:"text",placeholder:"Search for asset name, site and more",value:a.search,onChange:e=>{var t=e.target.value;l((e=>Jr(Jr({},e),{},{search:t})))}}),r.createElement(c.Z,{sx:Gr.headerIcons},r.createElement(he,null))),r.createElement(c.Z,{sx:Gr.filters},r.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",width:"400px"}},r.createElement(z,{label:"Start Date",value:null!==(t=a.start_date)&&void 0!==t?t:null,setValue:i("start_date")}),r.createElement(z,{label:"End Date",value:null!==(n=a.end_date)&&void 0!==n?n:null,setValue:i("end_date")}))))};function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ea={screenContent:{width:"100%",padding:"42px 65px 65px 32px",display:"flex",flexDirection:"column"}},ta=()=>{var e=Bt().data,t=e?null==e?void 0:e.companies.map((e=>e.id)):null,n=t?$r($r({},g),{},{companies:t}):g,a=(0,r.useState)(n),l=(0,x.Z)(a,2),i=l[0],o=l[1];return r.createElement(c.Z,{sx:ea.screenContent},r.createElement(Yr,{filters:i,setFilters:o}),r.createElement(c.Z,{sx:{height:"100%",overflowY:"auto"}},r.createElement(Qr,{filters:i})))};function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){var t,n=e.filters,a=e.afterSubmit,l=(0,Vn.Ds)().enqueueSnackbar,i=(0,de.useQueryClient)(),o=ge({filters:n}).data,s=(0,qn.cI)(),m=s.control,u=s.handleSubmit,p=s.formState.errors,g=(0,de.useMutation)((e=>le("transaction-history",e)),{onSuccess:()=>{i.invalidateQueries("transaction-history"),l("Transaction has been added!",{variant:"success"}),a()},onError:()=>{l("Error while trying to add transaction!",{variant:"error"})}}),E=e=>{g.mutate(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))};return r.createElement(c.Z,{sx:{width:"300px",padding:"16px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.createElement("form",{onSubmit:u(E)},r.createElement(c.Z,{sx:{display:"flex",flexDirection:"column"}},r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"subscription",label:"Transaction name",errors:p,control:m,rules:{required:f},options:["Collection report","Reconciliation Report"].map((e=>({key:e,value:e,label:e})))})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"amount_billed",label:"Amount billed",type:"number",errors:p,control:m,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"amount_bought",label:"Amount collected",type:"number",errors:p,control:m,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"days",label:"Energy billed",type:"number",errors:p,control:m,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"site",label:"Site",errors:p,control:m,rules:{required:f},options:null!==(t=null==o?void 0:o.results.map((e=>({key:e.id,value:e.id,label:e.name}))))&&void 0!==t?t:[]})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Jn,{name:"time",label:"Date",errors:p,control:m,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(d.Z,{variant:"contained",onClick:u(E)},"Submit")))))}function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ia={header:{display:"flex",justifyContent:"space-between",width:"100%",height:"56px"},filters:{display:"flex",width:"100%",justifyContent:"end",margin:"20px"},headerIcons:{display:"flex",alignItems:"center"}},oa=e=>{var t,n,a=e.filters,l=e.setFilters,i=r.useState(!1),o=(0,x.Z)(i,2),s=o[0],m=o[1],d=e=>t=>{l((n=>la(la({},n),{},{[e]:t})))};return r.createElement(c.Z,null,r.createElement(c.Z,{sx:ia.header},r.createElement(S.Z,{sx:{width:"500px"},id:"site_search",type:"text",placeholder:"Search for asset name, site and more",value:a.search,onChange:e=>{var t=e.target.value;l((e=>la(la({},e),{},{search:t})))}}),r.createElement(c.Z,{sx:ia.headerIcons},r.createElement(he,null))),r.createElement(c.Z,{sx:ia.filters},r.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",width:"580px"}},r.createElement(p,{label:"Add transaction",onClick:()=>{m(!0)}}),r.createElement(z,{label:"Start Date",value:null!==(t=a.start_date)&&void 0!==t?t:null,setValue:d("start_date")}),r.createElement(z,{label:"End Date",value:null!==(n=a.end_date)&&void 0!==n?n:null,setValue:d("end_date")}))),r.createElement(Wn,{open:s,setOpen:m,title:"Add transaction"},r.createElement(ra,{afterSubmit:()=>{m(!1)},filters:a})))};function ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ma={screenContent:{width:"90%",margin:"16px",paddingRight:"8px",display:"flex",flexDirection:"column",overflowY:"auto"}},da=()=>{var e=Bt().data,t=e?null==e?void 0:e.companies.map((e=>e.id)):null,n=t?sa(sa({},g),{},{companies:t}):g,a=(0,r.useState)(n),l=(0,x.Z)(a,2),i=l[0],o=l[1];return r.createElement(c.Z,{sx:ma.screenContent},r.createElement(oa,{filters:i,setFilters:o}),r.createElement(c.Z,null,r.createElement($n,{filters:i})))};function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ga=e=>{var t,n,a=e.filters,l=e.setFilters,i=e=>t=>{l((n=>pa(pa({},n),{},{[e]:t})))};return r.createElement(xe,null,r.createElement(Z.ZP,{container:!0,spacing:1,sx:{width:"400px"}},r.createElement(Z.ZP,{item:!0,lg:6,md:6,sm:12,xs:12},r.createElement(z,{label:"Start Date",value:null!==(t=a.start_date)&&void 0!==t?t:null,setValue:i("start_date")})),r.createElement(Z.ZP,{item:!0,lg:6,md:6,sm:12,xs:12},r.createElement(z,{label:"End Date",value:null!==(n=a.end_date)&&void 0!==n?n:null,setValue:i("end_date")}))))};var fa={displayCenter:{display:"flex",flexDirection:"column",alignItems:"center"}},Ea=e=>{var t=e.filters;return r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:fa.displayCenter},r.createElement(st,{cardType:"revenue_losses",field:"total_revenue",label:"Total Revenue (N)",handler:Zt.MANAGER,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:fa.displayCenter},r.createElement(st,{cardType:"revenue_losses",field:"atc_losses",label:"AT&C Losses (%)",handler:Zt.MANAGER,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:fa.displayCenter},r.createElement(st,{cardType:"total_consumption",field:"total_consumption",label:"Total consumption (kWh)",handler:Zt.MANAGER,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:fa.displayCenter},r.createElement(st,{cardType:"current_load",field:"current_load",label:"Current Load (kW)",handler:Zt.MANAGER,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:8,md:6,sm:12,sx:fa.displayCenter},r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:12,md:12,sm:12,sx:fa.displayCenter},r.createElement(Fe,{title:"Map"},r.createElement("img",{src:"map.png",alt:"Smarterise",style:{width:"100%",height:"460px"}}))),r.createElement(Z.ZP,{item:!0,lg:4,md:12,sm:12,sx:fa.displayCenter},r.createElement(st,{cardType:"current_load",field:"number_of_sites",label:"Number of sites",handler:Zt.MANAGER,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:4,md:12,sm:12,sx:fa.displayCenter},r.createElement(st,{cardType:"current_load",field:"number_of_users",label:"Number of users",handler:Zt.MANAGER,filters:t,formatter:e=>B(e)})),r.createElement(Z.ZP,{item:!0,lg:4,md:12,sm:12,sx:fa.displayCenter},r.createElement(st,{cardType:"current_load",field:"pending_alerts",label:"Pending alerts",handler:Zt.MANAGER,filters:t,formatter:e=>B(e)})))),r.createElement(Z.ZP,{item:!0,lg:4,md:6,sm:12,sx:fa.displayCenter},r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:12,md:12,sm:12},r.createElement(We,{filters:t})),r.createElement(Z.ZP,{item:!0,lg:12,md:12,sm:12},r.createElement(Ln,{filters:t})))))};function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ha={screenContent:{width:"90%",margin:"16px",paddingRight:"8px",display:"flex",flexDirection:"column",overflowY:"auto"}},xa=()=>{var e=Bt().data,t=e?null==e?void 0:e.companies.map((e=>e.id)):null,n=t?ba(ba({},g),{},{companies:t}):g,a=(0,r.useState)(n),l=(0,x.Z)(a,2),i=l[0],o=l[1];return r.createElement(c.Z,{sx:ha.screenContent},r.createElement(ga,{filters:i,setFilters:o}),r.createElement(Ea,{filters:i}))};function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oa={screenContent:{width:"100%",padding:"42px 65px 65px 32px",display:"flex",flexDirection:"column",overflowY:"auto"}},_a=()=>{var e=Bt().data,t=e?null==e?void 0:e.companies.map((e=>e.id)):null,n=t?Za(Za({},g),{},{companies:t}):g,a=(0,r.useState)(n),l=(0,x.Z)(a,2),i=l[0],o=l[1];return r.createElement(c.Z,{sx:Oa.screenContent},r.createElement(Oe,{filters:i,setFilters:o}),r.createElement(Dt,{filters:i}))};function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ja={screenContent:{width:"90%",margin:"16px",paddingRight:"8px",display:"flex",flexDirection:"column",overflowY:"auto"}},Da=()=>{var e=Bt().data,t=e?null==e?void 0:e.companies.map((e=>e.id)):null,n=t?Pa(Pa({},g),{},{companies:t}):g,a=(0,r.useState)(n),l=(0,x.Z)(a,2),i=l[0],o=l[1];return r.createElement(c.Z,{sx:ja.screenContent},r.createElement(Oe,{filters:i,setFilters:o}),r.createElement(tr,{filters:i}))},Aa=["children","value","index"];function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ra={screenContent:{width:"100%",padding:"42px 65px 65px 32px",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",width:"100%",height:"56px"},filters:{display:"flex",width:"100%",justifyContent:"space-between",margin:"20px"},headerIcons:{display:"flex",alignItems:"center"},cardRow:{display:"flex",justifyContent:"space-between",paddingTop:"36px"}};function za(e){var t=e.children,n=e.value,r=e.index,a=(0,l.Z)(e,Aa);return React.createElement("div",(0,Fn.Z)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},a),n===r&&React.createElement(c.Z,{sx:{p:3}},React.createElement(_r.Z,null,t)))}function ka(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var La=()=>{var e,t,n=(0,r.useState)(0),a=(0,x.Z)(n,2),l=a[0],i=a[1],o=Bt().data,s=o?null==o?void 0:o.companies.map((e=>e.id)):null,m=s?Ca(Ca({},g),{},{companies:s}):g,d=(0,r.useState)(m),u=(0,x.Z)(d,2),f=u[0],E=u[1],y=e=>t=>{E((n=>Ca(Ca({},n),{},{[e]:t})))};return React.createElement(c.Z,{sx:Ra.screenContent},React.createElement(c.Z,{sx:Ra.header},React.createElement(S.Z,{sx:{width:"500px"},id:"site_search",type:"text",placeholder:"Search for asset name, site and more",value:f.search,onChange:e=>{var t=e.target.value;E((e=>Ca(Ca({},e),{},{search:t})))}}),React.createElement(c.Z,{sx:Ra.headerIcons},React.createElement(he,null))),React.createElement(c.Z,{sx:Ra.filters},React.createElement(c.Z,{sx:{borderBottom:1,borderColor:"divider"}},React.createElement(Zr.Z,{value:l,onChange:(e,t)=>{i(t)},"aria-label":"basic tabs example"},React.createElement(Or.Z,(0,Fn.Z)({label:"Event Logs"},ka(0))),React.createElement(Or.Z,(0,Fn.Z)({label:"Alerts"},ka(1))),React.createElement(Or.Z,(0,Fn.Z)({label:"User Logs"},ka(2))),React.createElement(Or.Z,(0,Fn.Z)({label:"Raw data"},ka(3))))),React.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",width:"400px"}},React.createElement(z,{label:"Start Date",value:null!==(e=f.start_date)&&void 0!==e?e:null,setValue:y("start_date")}),React.createElement(z,{label:"End Date",value:null!==(t=f.end_date)&&void 0!==t?t:null,setValue:y("end_date")}))),React.createElement(c.Z,null,React.createElement(za,{value:l,index:0},React.createElement(zr,{filters:f})),React.createElement(za,{value:l,index:1},React.createElement(ot,{filters:f})),React.createElement(za,{value:l,index:2},React.createElement(Ur,{filters:f})),React.createElement(za,{value:l,index:3},React.createElement(Fe,{title:"Choose Details"},React.createElement(Dr,{label:"Start Date"}),React.createElement(Dr,{label:"End Date"}),React.createElement(_r.Z,null,"Packaged type"),React.createElement(wr.Z,{control:React.createElement(Pr.Z,{checked:!0,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Power (KW)"}),React.createElement(wr.Z,{control:React.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Frequency (Hz)"}),React.createElement(wr.Z,{control:React.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Voltage (V)"}),React.createElement(wr.Z,{control:React.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Phase Voltage"}),React.createElement(wr.Z,{control:React.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Status"}),React.createElement(wr.Z,{control:React.createElement(Pr.Z,{checked:!0,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Import Active Energy"}),React.createElement(wr.Z,{control:React.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Reactive Power"}),React.createElement(wr.Z,{control:React.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Frequent"}),React.createElement(wr.Z,{control:React.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Load Type"}),React.createElement(wr.Z,{control:React.createElement(Pr.Z,{checked:!1,onChange:e=>console.log("Change in checkbox with event: ",e)}),label:"Current K Factor"}),React.createElement(c.Z,{sx:{display:"flex",justifyContent:"center"}},React.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",width:"250px"}},React.createElement(p,{label:"Cancel",onClick:()=>{}}),React.createElement(p,{disabled:!0,label:"Download",onClick:()=>{}})))))))},Ta={container:{width:"90%",maxWidth:"400px",height:"140px",borderRadius:"16px",padding:"8px",display:"flex",flexDirection:"column",alignItems:"center"},value:{paddingTop:"8px",fontWeight:"bold",fontSize:"26px",lineHeight:"48px"},label:{paddingTop:"20px",fontSize:"14px",color:"#6E7883",lineHeight:"48px"}},Ia=e=>{var t=e.value,n=e.label,a=e.isLoading,l=e.isError;return r.createElement(s.Z,{sx:Ta.container,variant:"outlined"},l?r.createElement(c.Z,null,"Error fetching data..."):a?r.createElement(je,null):r.createElement(c.Z,{sx:Ta.value},t),r.createElement(c.Z,{sx:Ta.label},n))},Ua=k.z.object({total_energy_expanses:k.z.number(),total_consumption:k.z.number(),current_load:k.z.number(),co2_savings:k.z.number(),number_of_companies:k.z.number(),number_of_sites:k.z.number(),number_of_users:k.z.number()}),Na="account-home/cards-data",Ma=me({localUseRealData:!0,apiRoute:Na,schema:Ua,mockResponse:{total_energy_expanses:32727658,total_consumption:32727658,current_load:2727121,co2_savings:23,number_of_companies:2e3,number_of_sites:19e4,number_of_users:12e3}}),Ba=k.z.object({dataset:$}),Wa="account-home/top-savings",qa=me({localUseRealData:!0,apiRoute:Wa,schema:Ba,mockResponse:{dataset:[["company","savings"],["K&C Trios",850],["Da Vinci Vault",200],["Love Energy",300],["Justus Industries",500],["Kinfe ratings",800]]}});const Fa=e=>{var t=(e=>(0,de.useQuery)([Wa,e],(()=>qa(e))))({filters:e.filters}),n=t.data,a=t.isLoading,l=t.isError,i={dataset:{source:null==n?void 0:n.dataset},xAxis:{},yAxis:{type:"category",axisLabel:{show:!1}},series:[{type:"bar",barWidth:"20%",encode:{x:"savings",y:"company"},label:{position:[0,-14],formatter:"{b}",show:!0}}],color:["#ffbe00"]};return r.createElement(ze,{title:"Top Savings"},a?r.createElement(je,null):l?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(De.Z,{option:i}))};var Ha=k.z.object({dataset:$}),Ka="account-home/top-revenues",Qa=me({localUseRealData:!0,apiRoute:Ka,schema:Ha,mockResponse:{dataset:[["company","savings"],["K&C Trios",850],["Da Vinci Vault",200],["Love Energy",300],["Justus Industries",500],["Kinfe ratings",800]]}});const Va=e=>{var t=(e=>(0,de.useQuery)([Ka,e],(()=>Qa(e))))({filters:e.filters}),n=t.data,a=t.isLoading,l=t.isError,i={dataset:{source:null==n?void 0:n.dataset},xAxis:{},yAxis:{type:"category",axisLabel:{show:!1}},series:[{type:"bar",barWidth:"20%",encode:{x:"savings",y:"company"},label:{position:[0,-14],formatter:"{b}",show:!0}}],color:["#ffbe00"]};return r.createElement(ze,{title:"Top Revenue"},a?r.createElement(je,null):l?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(De.Z,{option:i}))};var Ja={screenContent:{width:"90%",margin:"16px",paddingRight:"8px",display:"flex",flexDirection:"column",overflowY:"auto"},displayCenter:{display:"flex",flexDirection:"column",alignItems:"center"}},Ga=()=>{var e,t=(0,r.useState)(g),n=(0,x.Z)(t,2),a=n[0],l=n[1],i=(e={filters:a},(0,de.useQuery)([Na,e],(()=>Ma(e)))),o=i.data,s=i.isLoading,m=i.isError;return r.createElement(c.Z,{sx:Ja.screenContent},r.createElement(ga,{filters:a,setFilters:l}),r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:Ja.displayCenter},r.createElement(Ia,{value:B(null==o?void 0:o.total_energy_expanses),label:"Total Energy Expanses (N)",isLoading:s,isError:m})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:Ja.displayCenter},r.createElement(Ia,{value:B(null==o?void 0:o.total_consumption),label:"Total Consumtion (kWh)",isLoading:s,isError:m})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:Ja.displayCenter},r.createElement(Ia,{value:B(null==o?void 0:o.current_load),label:"Current Load (kW)",isLoading:s,isError:m})),r.createElement(Z.ZP,{item:!0,lg:3,md:6,sm:12,sx:Ja.displayCenter},r.createElement(Ia,{value:B(null==o?void 0:o.co2_savings),label:"CO2 savings (MMT)",isLoading:s,isError:m})),r.createElement(Z.ZP,{item:!0,lg:8,md:6,sm:12,sx:Ja.displayCenter},r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:12,md:12,sm:12,sx:Ja.displayCenter},r.createElement(Fe,{title:"Map"},r.createElement("img",{src:"map.png",alt:"Smarterise",style:{width:"100%",height:"460px"}}))),r.createElement(Z.ZP,{item:!0,lg:4,md:12,sm:12,sx:Ja.displayCenter},r.createElement(Ia,{value:B(null==o?void 0:o.number_of_companies),label:"Number of companies",isLoading:s,isError:m})),r.createElement(Z.ZP,{item:!0,lg:4,md:12,sm:12,sx:Ja.displayCenter},r.createElement(Ia,{value:B(null==o?void 0:o.number_of_sites),label:"Number of sites",isLoading:s,isError:m})),r.createElement(Z.ZP,{item:!0,lg:4,md:12,sm:12,sx:Ja.displayCenter},r.createElement(Ia,{value:B(null==o?void 0:o.number_of_users),label:"Number of users",isLoading:s,isError:m})))),r.createElement(Z.ZP,{item:!0,lg:4,md:6,sm:12,sx:Ja.displayCenter},r.createElement(Z.ZP,{container:!0,spacing:1},r.createElement(Z.ZP,{item:!0,lg:12,md:12,sm:12},r.createElement(Fa,{filters:a})),r.createElement(Z.ZP,{item:!0,lg:12,md:12,sm:12},r.createElement(Va,{filters:a}))))))};function Ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $a={header:{display:"flex",justifyContent:"space-between",width:"100%",height:"56px"},filters:{display:"flex",width:"100%",justifyContent:"end",margin:"20px"},headerIcons:{display:"flex",alignItems:"center"}},el=e=>{var t=e.filters,n=e.setFilters,a=e.searchPlaceholder,l=void 0===a?"search anything...":a;return r.createElement(c.Z,null,r.createElement(c.Z,{sx:$a.header},r.createElement(S.Z,{sx:{width:"500px"},id:"site_search",type:"text",placeholder:l,value:t.search,onChange:e=>{var t=e.target.value;n((e=>Xa(Xa({},e),{},{search:t})))}}),r.createElement(c.Z,{sx:$a.headerIcons},r.createElement(he,null))))},tl=[{key:"car_energy",value:"car_energy",label:"Car energy"}],nl=k.z.enum(["car_energy"]),rl=["energy_monitoring"],al=[{key:"energy_monitoring",value:"energy_monitoring",label:"Energy monitoring"}],ll=(k.z.enum(rl),k.z.object({name:k.z.string(),company_type:nl,phone_number:k.z.string(),email:k.z.string(),address:k.z.string(),renewal_date:k.z.string(),service_type:k.z.enum(rl)})),il=k.z.object({id:k.z.number(),first_name:k.z.string(),last_name:k.z.string(),employee_id:k.z.string(),email:k.z.string(),phone_number:k.z.string(),access_level:k.z.enum(At),time:k.z.string()}),ol=ll.extend({id:k.z.number(),users:k.z.array(il)}),cl=ll.extend({id:k.z.number(),users:k.z.array(k.z.number())});function sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dl={name:"",phone_number:"",email:"",address:""};function ul(){var e=(0,Vn.Ds)().enqueueSnackbar,t=(0,de.useQueryClient)(),n=(0,qn.cI)({defaultValues:dl}),a=n.handleSubmit,l=n.control,i=n.reset,o=n.formState.errors,s=(0,de.useMutation)((e=>{return le("companies",ml(ml({},e),{},{users:[],renewal_date:(t=e.renewal_date,(0,M.Z)(new Date(t),"yyyy-LL-dd"))}));var t}),{onSuccess:()=>{t.invalidateQueries("companies"),e("Company has been added!",{variant:"success"}),i()},onError:()=>{e("Error while trying to add company!",{variant:"error"})}}),m=e=>{console.log(e),s.mutate(e)};return r.createElement(c.Z,null,r.createElement(c.Z,null,"Add company"),r.createElement("form",{onSubmit:a(m)},r.createElement(c.Z,{sx:{display:"flex",flexDirection:"column"}},r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"name",label:"Company name",errors:o,control:l,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"company_type",label:"Company Type",errors:o,control:l,rules:{required:f},options:tl})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"phone_number",label:"Company phone number",errors:o,control:l,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"email",label:"Company email address",type:"email",errors:o,control:l,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"address",label:"Company address",multiline:!0,rows:5,errors:o,control:l,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Jn,{name:"renewal_date",label:"Company renewal date",errors:o,control:l,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"service_type",label:"Company service type",errors:o,control:l,rules:{required:f},options:al})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(d.Z,{variant:"contained",onClick:a(m)},"Submit")))))}var pl=k.z.object({count:k.z.number(),next:k.z.nullable(k.z.string()),previous:k.z.nullable(k.z.string()),results:k.z.array(ol)}),gl="companies",fl=me({localUseRealData:!0,apiRoute:gl,schema:pl,mockResponse:{count:100,next:null,previous:null,results:[{id:1,name:"KBG Russia",company_type:"car_energy",service_type:"energy_monitoring",phone_number:"1234567890",email:"email@email.com",address:"Address",renewal_date:"2022-10-20",users:[{id:1,first_name:"David1",last_name:"Usman1",phone_number:"1",employee_id:"SM11098",email:"drakefinn@smarterise.com",access_level:"operations",time:"Sun · 14 April, 04:25 AM"},{id:2,first_name:"David2",last_name:"Usman2",phone_number:"2",employee_id:"SM11098",email:"drakefinn@smarterise.com",access_level:"operations",time:"Sun · 14 April, 04:25 AM"},{id:3,first_name:"David3",last_name:"Usman3",phone_number:"3",employee_id:"SM11098",email:"drakefinn@smarterise.com",access_level:"operations",time:"Sun · 14 April, 04:25 AM"}]}]}}),El=e=>{var t,n,a,l=e.filters,o=r.useState(10),s=(0,x.Z)(o,2),m=s[0],d=s[1],u=r.useState(0),p=(0,x.Z)(u,2),g=p[0],f=p[1],E=(0,r.useState)(l),y=(0,x.Z)(E,2),b=y[0],h=y[1],v=(a={pagination:{page:g,page_size:m},filters:b},(0,de.useQuery)([gl,a],(()=>fl(a)))),Z=v.data,O=v.isLoading,_=v.isError,w=null!==(t=null==Z?void 0:Z.results)&&void 0!==t?t:[];return(0,r.useEffect)((()=>{f(0),h(l)}),[l]),O?r.createElement(je,null):_?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(c.Z,null,r.createElement(He.Z,{component:Ke.Z},r.createElement(Qe.Z,{sx:{minWidth:650},"aria-label":"simple table"},r.createElement(Ve.Z,null,r.createElement(Je.Z,null,r.createElement(Ge.Z,{align:"center"},"Companies"),r.createElement(Ge.Z,{align:"center"},"Date"),r.createElement(Ge.Z,{align:"center"},"Users"),r.createElement(Ge.Z,{align:"center"},"Phone number"),r.createElement(Ge.Z,{align:"center"},"Email address"))),r.createElement(Ye.Z,null,w.map((e=>r.createElement(Je.Z,{key:e.id},r.createElement(Ge.Z,{align:"center"},r.createElement(i.rU,{to:e.id.toString()},e.name)),r.createElement(Ge.Z,{align:"center"},e.renewal_date),r.createElement(Ge.Z,{align:"center"},e.users.length),r.createElement(Ge.Z,{align:"center"},e.phone_number),r.createElement(Ge.Z,{align:"center"},e.email))))))),r.createElement(Xe.Z,{rowsPerPageOptions:[15],component:"div",count:null!==(n=null==Z?void 0:Z.count)&&void 0!==n?n:0,rowsPerPage:m,page:g,onPageChange:(e,t)=>{f(t)},onRowsPerPageChange:e=>{d(parseInt(e.target.value,10)),f(0)}}))},yl={screenContent:{width:"100%",padding:"42px 65px 65px 32px",display:"flex",flexDirection:"column"}},bl=()=>{var e=(0,r.useState)(g),t=(0,x.Z)(e,2),n=t[0],a=t[1];return r.createElement(c.Z,{sx:yl.screenContent},r.createElement(el,{filters:n,setFilters:a,searchPlaceholder:"Search for alert, deals and more..."}),r.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",paddingTop:"32px"}},r.createElement(c.Z,{sx:{width:"80%",marginRight:"16px"}},r.createElement(El,{filters:n})),r.createElement(c.Z,{sx:{width:"320px"}},r.createElement(ul,null))))},hl={id:1,name:"KGB Russia",company_type:"car_energy",phone_number:"+40 11223344",email:"kgb@russia.ru",address:"somewhere in Russia",renewal_date:"Sun · 14 April, 04:25 AM",service_type:"energy_monitoring",users:[]},xl="company",vl=(e,t)=>(0,de.useQuery)([xl,e,t],(()=>(e=>me({localUseRealData:!0,apiRoute:"".concat(xl,"/").concat(e),schema:ol,mockResponse:hl}))(e)(t)));function Zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zl(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _l={screenContent:{width:"90%",margin:"16px",paddingRight:"8px",display:"flex",flexDirection:"column",overflowY:"auto"},companyBreadcrumb:{paddingTop:"18px"}},wl=()=>{var e,t=(0,o.UO)().id,n=(0,o.s0)(),a=t?Ol(Ol({},g),{},{companies:[t]}):g,l=(0,r.useState)(a),i=(0,x.Z)(l,2),s=i[0],m=i[1],d=vl(null!=t?t:"0"),u=d.data,f=d.isLoading,E=r.useState(0),y=(0,x.Z)(E,2),b=y[0],h=y[1];return r.createElement(c.Z,{sx:_l.screenContent},r.createElement(Oe,{filters:s,setFilters:m}),f?r.createElement(je,null):r.createElement(c.Z,null,r.createElement(c.Z,{sx:_l.companyBreadcrumb},"Company ",null!==(e=null==u?void 0:u.name)&&void 0!==e?e:""),r.createElement(Z.ZP,{container:!0,spacing:1,sx:{marginBottom:"16px"}},r.createElement(Z.ZP,{item:!0,lg:7,md:12,sm:12,order:{lg:1,md:2,sm:2,xs:2}},r.createElement(Zr.Z,{value:b,onChange:(e,t)=>{h(t)},"aria-label":"basic tabs example"},r.createElement(Or.Z,(0,Fn.Z)({label:"Overview"},Mr(0))),r.createElement(Or.Z,(0,Fn.Z)({label:"Operation"},Mr(1))),r.createElement(Or.Z,(0,Fn.Z)({label:"Finance"},Mr(2))),r.createElement(Or.Z,(0,Fn.Z)({label:"Log Book"},Mr(3))))),r.createElement(Z.ZP,{item:!0,lg:5,md:12,sm:12,order:{lg:2,md:1,sm:1,xs:1},sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},r.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",width:"370px"}},r.createElement(p,{label:"Add device",onClick:()=>{n("/account-ui/companies/".concat(t,"/add-device"))}}),r.createElement(p,{label:"Add employee",onClick:()=>{n("/account-ui/companies/".concat(t,"/add-employee"))}})))),r.createElement(c.Z,null,r.createElement(Br,{value:b,index:0},r.createElement(Ea,{filters:s})),r.createElement(Br,{value:b,index:1},r.createElement(Dt,{filters:s})),r.createElement(Br,{value:b,index:2},r.createElement(tr,{filters:s})),r.createElement(Br,{value:b,index:3},r.createElement(Ur,{filters:s})))))},Pl=k.z.object({id:k.z.number(),name:k.z.string(),daily_availability:k.z.string(),price:k.z.number()}),jl=k.z.array(Pl),Dl="device-tariffs",Al=me({localUseRealData:!0,apiRoute:Dl,schema:jl,mockResponse:[{id:1,name:"Band A",price:54.08,daily_availability:"minimum 20hrs"},{id:2,name:"Band B",price:54.08,daily_availability:"minimum 20hrs"},{id:3,name:"Band C",price:54.08,daily_availability:"minimum 20hrs"}]}),Sl=e=>(0,de.useQuery)([Dl,e],(()=>Al(e)));function Cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zl={id:"",name:"",location:"",co_ordinate:"",company_district:"",asset_type:""};function kl(e){var t,n=e.filters,a=(0,o.UO)().id,l=(0,Vn.Ds)().enqueueSnackbar,i=(0,de.useQueryClient)(),s=Sl({filters:n}).data,m=(0,qn.cI)({defaultValues:zl}),u=m.control,p=m.handleSubmit,g=m.reset,E=m.formState.errors,y=(0,de.useMutation)((e=>le("devices",e)),{onSuccess:()=>{i.invalidateQueries("devices"),l("Device has been added!",{variant:"success"}),g()},onError:()=>{l("Error while trying to add device!",{variant:"error"})}}),b=e=>{console.log(e),y.mutate(Rl(Rl({},e),{},{company:parseInt(null!=a?a:"0")}))};return r.createElement(c.Z,null,r.createElement(c.Z,null,"Add device"),r.createElement("form",{onSubmit:p(b)},r.createElement(c.Z,{sx:{display:"flex",flexDirection:"column"}},r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"id",label:"Device id",errors:E,control:u,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"name",label:"Device name",errors:E,control:u,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"location",label:"Device location",errors:E,control:u,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"co_ordinate",label:"Device co-ordinate",errors:E,control:u,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"company_district",label:"Company district",errors:E,control:u,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"asset_capacity",label:"Asset capacity",type:"number",errors:E,control:u,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"asset_type",label:"Asset type",errors:E,control:u,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"tariff",label:"Device tariff",errors:E,control:u,rules:{required:f},options:null!==(t=null==s?void 0:s.map((e=>({key:e.id,value:e.id,label:e.name}))))&&void 0!==t?t:[]})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(d.Z,{variant:"contained",onClick:p(b)},"Submit")))))}var Ll=k.z.object({id:k.z.string(),name:k.z.string(),location:k.z.string(),co_ordinate:k.z.string(),company_district:k.z.string(),asset_type:k.z.string(),asset_capacity:k.z.number(),linked_at:k.z.string(),site:k.z.number(),company:k.z.number(),tariff:k.z.number()}).merge(k.z.object({company:cl,tariff:Pl})),Tl=k.z.object({count:k.z.number(),next:k.z.nullable(k.z.string()),previous:k.z.nullable(k.z.string()),results:k.z.array(Ll)}),Il="devices",Ul=me({localUseRealData:!0,apiRoute:Il,schema:Tl,mockResponse:{count:100,next:null,previous:null,results:[{id:"David ABU-235LK",name:"David ABU-235LK",company:{id:1,name:"KBG Russia",company_type:"car_energy",service_type:"energy_monitoring",phone_number:"1234567890",email:"email@email.com",address:"Address",renewal_date:"2022-10-20",users:[]},asset_type:"Transformer",asset_capacity:300,linked_at:"Sun · 14 April, 04:25 AM"},{id:"David ABU-235LK",name:"Daniel ABU-235LK",company:{id:2,name:"EKB",company_type:"car_energy",service_type:"energy_monitoring",phone_number:"1234567890",email:"email@email.com",address:"Address",renewal_date:"2022-10-20",users:[]},asset_type:"Generator",asset_capacity:300,linked_at:"Sun · 14 April, 04:25 AM"},{id:"David ABU-235LK",name:"Emmanuel ABU-235LK",company:{id:3,name:"Vercase",company_type:"car_energy",service_type:"energy_monitoring",phone_number:"1234567890",email:"email@email.com",address:"Address",renewal_date:"2022-10-20",users:[]},asset_type:"Solar PV",asset_capacity:300,linked_at:"Sun · 14 April, 04:25 AM"},{id:"David ABU-235LK",name:"Jerry ABU-235LK",company:{id:4,name:"Jim Ltd",company_type:"car_energy",service_type:"energy_monitoring",phone_number:"1234567890",email:"email@email.com",address:"Address",renewal_date:"2022-10-20",users:[]},asset_type:"Baterry",asset_capacity:300,linked_at:"Sun · 14 April, 04:25 AM"}]}});function Nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nl(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bl(e){var t,n,a=e.entity,l=e.afterSubmit,i=e.filters,o=(0,de.useQueryClient)(),s=(0,Vn.Ds)().enqueueSnackbar,m=ge({filters:i}).data,u=Sl({filters:i}).data,p=Ml(Ml({},a),{},{company:a.company.id,tariff:a.tariff.id}),g=(0,qn.cI)({defaultValues:p}),E=g.control,y=g.handleSubmit,b=g.formState.errors,h=(0,de.useMutation)((e=>oe("devices",p.id,Ml({},e))),{onSuccess:()=>{o.invalidateQueries("devices"),s("Device has been updated!",{variant:"success"}),l()},onError:()=>{s("Error while trying to update device!",{variant:"error"})}}),x=e=>{console.log(e),h.mutate(Ml({},e))};return r.createElement(c.Z,{sx:{width:"300px",padding:"16px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.createElement("form",{onSubmit:y(x)},r.createElement(c.Z,{sx:{display:"flex",flexDirection:"column"}},r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"id",label:"Device id",errors:b,control:E,rules:{required:f},disabled:!0})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"name",label:"Device name",errors:b,control:E,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"location",label:"Device location",errors:b,control:E,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"co_ordinate",label:"Device co-ordinate",errors:b,control:E,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"company_district",label:"Company district",errors:b,control:E,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"asset_capacity",label:"Asset capacity",type:"number",errors:b,control:E,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"asset_type",label:"Asset type",errors:b,control:E,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"site",label:"Site",errors:b,control:E,rules:{required:f},options:null!==(t=null==m?void 0:m.results.map((e=>({key:e.id,value:e.id,label:e.name}))))&&void 0!==t?t:[]})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"tariff",label:"Device tariff",errors:b,control:E,rules:{required:f},options:null!==(n=null==u?void 0:u.map((e=>({key:e.id,value:e.id,label:e.name}))))&&void 0!==n?n:[]})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(d.Z,{variant:"contained",onClick:y(x)},"Submit")))))}var Wl=e=>{var t,n,a,l=e.filters,i=r.useState(!1),o=(0,x.Z)(i,2),s=o[0],m=o[1],d=r.useState(null),u=(0,x.Z)(d,2),p=u[0],g=u[1],f=r.useState(10),E=(0,x.Z)(f,2),y=E[0],b=E[1],h=r.useState(0),v=(0,x.Z)(h,2),Z=v[0],O=v[1],_=(0,r.useState)(l),w=(0,x.Z)(_,2),P=w[0],j=w[1],D=(a={pagination:{page:Z,page_size:y},filters:P},(0,de.useQuery)([Il,a],(()=>Ul(a)))),A=D.data,S=D.isLoading,C=D.isError,R=null!==(t=null==A?void 0:A.results)&&void 0!==t?t:[],z=Q(R,p);(0,r.useEffect)((()=>{O(0),j(l)}),[l]);var k=(0,de.useQueryClient)(),L=(0,de.useMutation)((e=>ce("devices",e)),{onSuccess:()=>{k.invalidateQueries("devices")}});return S?r.createElement(je,null):C?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(c.Z,null,r.createElement(He.Z,{component:Ke.Z},r.createElement(Qe.Z,{sx:{minWidth:650},"aria-label":"simple table"},r.createElement(Ve.Z,null,r.createElement(Je.Z,null,r.createElement(Ge.Z,null,"Device ID"),r.createElement(Ge.Z,{align:"right"},"Device Name"),r.createElement(Ge.Z,{align:"right"},"Company"),r.createElement(Ge.Z,{align:"right"},"Asset Type"),r.createElement(Ge.Z,{align:"right"},"Asset Capacity"),r.createElement(Ge.Z,{align:"right"},"Time/Date"),r.createElement(Ge.Z,{align:"right"}))),r.createElement(Ye.Z,null,R.map((e=>r.createElement(Je.Z,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},r.createElement(Ge.Z,{align:"right",component:"th",scope:"row"},e.id),r.createElement(Ge.Z,{align:"right"},e.name),r.createElement(Ge.Z,{align:"right"},e.company.name),r.createElement(Ge.Z,{align:"right"},e.asset_type),r.createElement(Ge.Z,{align:"right"},e.asset_capacity),r.createElement(Ge.Z,{align:"right"},F(e.linked_at)),r.createElement(Ge.Z,{align:"right"},r.createElement(it,{menuActions:[{label:"Update",action:()=>{g(e.id),m(!0)}},{label:"Delete",action:()=>{L.mutate(e.id)}}]})))))))),r.createElement(Xe.Z,{rowsPerPageOptions:[15],component:"div",count:null!==(n=null==A?void 0:A.count)&&void 0!==n?n:0,rowsPerPage:y,page:Z,onPageChange:(e,t)=>{O(t)},onRowsPerPageChange:e=>{b(parseInt(e.target.value,10)),O(0)}}),r.createElement(Wn,{open:s,setOpen:m,title:"Update device"},null!=z?r.createElement(Bl,{entity:z,afterSubmit:()=>{m(!1)},filters:l}):"No device selected"))};function ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hl={screenContent:{width:"100%",padding:"42px 65px 65px 32px",display:"flex",flexDirection:"column"}},Kl=()=>{var e=(0,o.UO)().id,t=e?Fl(Fl({},g),{},{companies:[e]}):g,n=(0,r.useState)(t),a=(0,x.Z)(n,2),l=a[0],i=a[1];return r.createElement(c.Z,{sx:Hl.screenContent},r.createElement(el,{filters:l,setFilters:i,searchPlaceholder:"Search for alert, deals and more..."}),r.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",paddingTop:"32px"}},r.createElement(c.Z,{sx:{width:"80%",marginRight:"16px"}},r.createElement(Wl,{filters:l})),r.createElement(c.Z,{sx:{width:"320px"}},r.createElement(kl,{filters:l}))))};function Ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ql(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jl={first_name:"",last_name:"",employee_id:"",email:"",phone_number:""};function Gl(){var e=(0,o.UO)().id,t=(0,Vn.Ds)().enqueueSnackbar,n=(0,de.useQueryClient)(),a=(0,qn.cI)({defaultValues:Jl}),l=a.control,i=a.handleSubmit,s=a.reset,m=a.formState.errors,u=(0,de.useMutation)((t=>le("users",Vl(Vl({},t),{},{companies:[parseInt(null!=e?e:"0")]}))),{onSuccess:()=>{n.invalidateQueries("users"),t("Employee has been added!",{variant:"success"}),s()},onError:()=>{t("Error while trying to add employee!",{variant:"error"})}}),p=e=>{console.log(e),u.mutate(e)};return r.createElement(c.Z,null,r.createElement(c.Z,null,"Add employee"),r.createElement("form",{onSubmit:i(p)},r.createElement(c.Z,{sx:{display:"flex",flexDirection:"column"}},r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"first_name",label:"Employee first name",errors:m,control:l,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"last_name",label:"Employee last name",errors:m,control:l,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"employee_id",label:"Employee id",errors:m,control:l,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"phone_number",label:"Employee phone number",errors:m,control:l,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"email",label:"Employee email address",errors:m,control:l,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"access_level",label:"Employee access level",errors:m,control:l,rules:{required:f},options:St})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(d.Z,{variant:"contained",onClick:i(p)},"Submit")))))}function Yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yl(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $l(e){var t=e.entity,n=e.afterSubmit,a=(0,de.useQueryClient)(),l=(0,Vn.Ds)().enqueueSnackbar,i=(0,de.useMutation)((e=>ie("users",Xl({},e))),{onSuccess:()=>{a.invalidateQueries("users"),l("User has been updated!",{variant:"success"}),n()},onError:()=>{l("Error while trying to update user!",{variant:"error"})}}),o=Xl(Xl({},t),{},{companies:t.companies.map((e=>e.id))}),s=(0,qn.cI)({defaultValues:o}),m=s.control,u=s.handleSubmit,p=s.formState.errors,g=e=>{console.log(e),i.mutate(e)};return r.createElement(c.Z,{sx:{width:"300px",padding:"16px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.createElement("form",{onSubmit:u(g)},r.createElement(c.Z,{sx:{display:"flex",flexDirection:"column"}},r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"first_name",label:"Employee first name",errors:p,control:m,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"last_name",label:"Employee last name",errors:p,control:m,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"employee_id",label:"Employee id",errors:p,control:m,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"phone_number",label:"Employee phone number",errors:p,control:m,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Kn,{name:"email",label:"Employee email address",errors:p,control:m,rules:{required:f}})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(Qn,{name:"access_level",label:"Employee access level",errors:p,control:m,rules:{required:f},options:St})),r.createElement(c.Z,{sx:{padding:"8px",display:"flex",flexDirection:"column",width:"260px"}},r.createElement(d.Z,{variant:"contained",onClick:u(g)},"Submit")))))}var ei=e=>{var t,n,a,l=e.filters,o=r.useState(!1),s=(0,x.Z)(o,2),m=s[0],d=s[1],u=r.useState(null),p=(0,x.Z)(u,2),g=p[0],f=p[1],E=r.useState(10),y=(0,x.Z)(E,2),b=y[0],h=y[1],v=r.useState(0),Z=(0,x.Z)(v,2),O=Z[0],_=Z[1],w=(0,r.useState)(l),P=(0,x.Z)(w,2),j=P[0],D=P[1],A=(a={pagination:{page:O,page_size:b},filters:j},(0,de.useQuery)([yr,a],(()=>br(a)))),S=A.data,C=A.isLoading,R=A.isError,z=null!==(t=null==S?void 0:S.results)&&void 0!==t?t:[],k=Q(z,g);(0,r.useEffect)((()=>{_(0),D(l)}),[l]);var L=(0,de.useQueryClient)(),T=(0,de.useMutation)((e=>ce("users",e)),{onSuccess:()=>{L.invalidateQueries("users")}});return C?r.createElement(je,null):R?r.createElement(c.Z,null,"Error fetching data..."):r.createElement(c.Z,null,r.createElement(He.Z,{component:Ke.Z},r.createElement(Qe.Z,{sx:{minWidth:650},"aria-label":"simple table"},r.createElement(Ve.Z,null,r.createElement(Je.Z,null,r.createElement(Ge.Z,null,"Users"),r.createElement(Ge.Z,{align:"right"},"Company"),r.createElement(Ge.Z,{align:"right"},"Employee ID"),r.createElement(Ge.Z,{align:"right"},"Email address"),r.createElement(Ge.Z,{align:"right"},"Department"),r.createElement(Ge.Z,{align:"right"},"Time/Date"),r.createElement(Ge.Z,{align:"right"}))),r.createElement(Ye.Z,null,z.map((e=>{var t,n,a;return r.createElement(Je.Z,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},r.createElement(Ge.Z,{align:"right",component:"th",scope:"row"},hr(e)),r.createElement(Ge.Z,{align:"right"},r.createElement(i.rU,{to:null===(t=e.companies[0])||void 0===t?void 0:t.id.toString()},null!==(n=null===(a=e.companies[0])||void 0===a?void 0:a.name)&&void 0!==n?n:"")),r.createElement(Ge.Z,{align:"right"},e.employee_id),r.createElement(Ge.Z,{align:"right"},e.email),r.createElement(Ge.Z,{align:"right"},e.access_level),r.createElement(Ge.Z,{align:"right"},F(e.time)),r.createElement(Ge.Z,{align:"right"},r.createElement(it,{menuActions:[{label:"Update",action:()=>{f(e.id),d(!0)}},{label:"Delete",action:()=>{console.log("delete ",e.id),T.mutate(e.id)}}]})))}))))),r.createElement(Xe.Z,{rowsPerPageOptions:[15],component:"div",count:null!==(n=null==S?void 0:S.count)&&void 0!==n?n:0,rowsPerPage:b,page:O,onPageChange:(e,t)=>{_(t)},onRowsPerPageChange:e=>{h(parseInt(e.target.value,10)),_(0)}}),r.createElement(Wn,{open:m,setOpen:d,title:"Update account"},null!=k?r.createElement($l,{entity:k,afterSubmit:()=>{d(!1)}}):"No user selected"))};function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ri={screenContent:{width:"100%",padding:"42px 65px 65px 32px",display:"flex",flexDirection:"column"}},ai=()=>{var e=(0,o.UO)().id,t=e?ni(ni({},g),{},{companies:[e]}):g,n=(0,r.useState)(t),a=(0,x.Z)(n,2),l=a[0],i=a[1];return r.createElement(c.Z,{sx:ri.screenContent},r.createElement(el,{filters:l,setFilters:i,searchPlaceholder:"Search for alert, deals and more..."}),r.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",paddingTop:"32px"}},r.createElement(c.Z,{sx:{width:"80%",marginRight:"16px"}},r.createElement(ei,{filters:l})),r.createElement(c.Z,{sx:{width:"320px"}},r.createElement(Gl,null))))};function li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?li(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oi,ci={header:{display:"flex",justifyContent:"space-between",width:"100%",height:"56px"},filters:{display:"flex",width:"100%",justifyContent:"end",margin:"20px"},headerIcons:{display:"flex",alignItems:"center"}},si=e=>{var t,n,a,l=e.filters,i=e.setFilters,o={results:[{id:1,name:"Stell & Bronze Ltd"},{id:2,name:"Vasi Ltd"},{id:3,name:"KGB N PUDB"}]},s=e=>t=>{i((n=>ii(ii({},n),{},{[e]:t})))};return r.createElement(c.Z,null,r.createElement(c.Z,{sx:ci.header},r.createElement(S.Z,{sx:{width:"500px"},id:"users_search",type:"text",placeholder:"Search for users, companies and more",value:l.search,onChange:e=>{var t=e.target.value;i((e=>ii(ii({},e),{},{search:t})))}}),r.createElement(c.Z,{sx:ci.headerIcons},r.createElement(he,null))),r.createElement(c.Z,{sx:ci.filters},r.createElement(c.Z,{sx:{display:"flex",justifyContent:"space-between",width:"700px"}},r.createElement(j,{multiselect:!0,label:"Companies",options:null!==(t=null==o?void 0:o.results.map((e=>({label:e.name,value:e.id}))))&&void 0!==t?t:[],value:l.companies,setValue:s("companies")}),r.createElement(z,{label:"Start Date",value:null!==(n=l.start_date)&&void 0!==n?n:null,setValue:s("start_date")}),r.createElement(z,{label:"End Date",value:null!==(a=l.end_date)&&void 0!==a?a:null,setValue:s("end_date")}))))},mi={screenContent:{width:"100%",padding:"42px 65px 65px 32px",display:"flex",flexDirection:"column"}},di=()=>{var e=(0,r.useState)(g),t=(0,x.Z)(e,2),n=t[0],a=t[1];return r.createElement(c.Z,{sx:mi.screenContent},r.createElement(si,{filters:n,setFilters:a}),r.createElement(c.Z,null,r.createElement(ei,{filters:n})))},ui={screenContent:{width:"100%",padding:"42px 65px 65px 32px",display:"flex",flexDirection:"column"}},pi=()=>{var e=(0,r.useState)(g),t=(0,x.Z)(e,2),n=t[0],a=t[1];return r.createElement(c.Z,{sx:ui.screenContent},r.createElement(si,{filters:n,setFilters:a}),r.createElement(c.Z,null,r.createElement(Wl,{filters:n})))};!function(e){e.ADMIN="admin",e.MANAGER="manager",e.OPERATIONS="operation",e.FINANCE="finance"}(oi||(oi={}));const gi=()=>{var e=(0,m.D3)().logout,t=Bt(),n=t.data,a=t.isLoading,l=[];if(a)return r.createElement(c.Z,null,"Loading ...");if(a||null==n)return e({returnTo:"".concat(window.location.origin,"/login")}),console.log("User is not authenticated or no proper role"),r.createElement(c.Z,null,"User is not authenticated");var i=null==n?void 0:n.access_level;return i!==oi.ADMIN&&i!==oi.OPERATIONS||l.push({id:1,label:"Operations",path:"/operations/home"}),i!==oi.ADMIN&&i!==oi.FINANCE||l.push({id:2,label:"Finance",path:"/finance/home"}),i!==oi.ADMIN&&i!==oi.MANAGER||l.push({id:3,label:"Senior Manager",path:"/senior-manager-account/home"}),i===oi.ADMIN&&l.push({id:4,label:"Smarterise Account UI",path:"/account-ui/home"}),r.createElement(cr,{buttonDefinitions:l})};var fi=[{id:1,label:"Home",icon:r.createElement(sr.Z,null),path:"/senior-manager-account/home"},{id:2,label:"Operations",icon:r.createElement(mr.Z,null),path:"/senior-manager-account/operations"},{id:3,label:"Finance",icon:r.createElement(ye.Z,null),path:"/senior-manager-account/finance"},{id:4,label:"Activity Log",icon:r.createElement(ye.Z,null),path:"/senior-manager-account/activity-log"},{id:5,label:"Account",icon:r.createElement(ye.Z,null),path:"/account"}],Ei=()=>Bt().isLoading?r.createElement(je,null):r.createElement(c.Z,{sx:{display:"flex"}},r.createElement(cr,{buttonDefinitions:fi}),r.createElement(o.j3,null)),yi=n(8166),bi=n(219),hi=[{id:1,label:"Home",icon:r.createElement(sr.Z,null),path:"/account-ui/home"},{id:2,label:"Companies",icon:r.createElement(yi.Z,null),path:"/account-ui/companies"},{id:3,label:"Users",icon:r.createElement(ye.Z,null),path:"/account-ui/users"},{id:4,label:"Devices",icon:r.createElement(bi.Z,null),path:"/account-ui/devices"}],xi=()=>Bt().isLoading?r.createElement(je,null):r.createElement(c.Z,{sx:{display:"flex"}},r.createElement(cr,{buttonDefinitions:hi}),r.createElement(o.j3,null));const vi=()=>{var e=(0,m.D3)(),t=e.isAuthenticated,n=e.isLoading,a=e.getAccessTokenSilently,l=e.logout,i=(0,r.useState)(!1),s=(0,x.Z)(i,2),d=s[0],u=s[1],p=Bt({enabled:!!d}),g=p.data,f=p.isLoading,E=p.error,y=(0,o.s0)();if((0,r.useEffect)((()=>{t&&!d&&function(){var e=(0,I.Z)(N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:t=e.sent,localStorage.setItem("auth0Token",t),console.log("tokenizationset",t),u(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error while fetching token: ",e.t0),l({returnTo:"".concat(window.location.origin,"/login")});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[d,t,a,l]),n||!d||f)return r.createElement(je,null);if(E)return alert("Error fetching user info"),l({returnTo:"".concat(window.location.origin,"/login")}),console.log("This is absolute nonsenseError fetching user info:",E),r.createElement(c.Z,null,"Error fetching user data. Redirecting to login...");if(!t||f||null==g)return console.log("I don't know this user",t,f,g),l({returnTo:"".concat(window.location.origin,"/login")}),console.log("I don't know this user",t,f,g),r.createElement(c.Z,null,"I don't know this user");switch(null==g?void 0:g.access_level){case oi.ADMIN:y("/account-ui");break;case oi.MANAGER:y("/senior-manager-account");break;case oi.FINANCE:y("/finance");break;case oi.OPERATIONS:y("/operations");break;default:return l({returnTo:"".concat(window.location.origin,"/login")}),console.log("User does not have the required role to access the app"),r.createElement(c.Z,null,"User does not have the required role to access the app")}return r.createElement(c.Z,null,"Checking user...")};const Zi=()=>{var e=(0,m.D3)().logout;return(0,r.useEffect)((()=>{e({returnTo:"".concat(window.location.origin,"/login")})}),[]),r.createElement(c.Z,null,"Logging out...")};var Oi=["component"],_i=e=>{var t=e.component,n=(0,l.Z)(e,Oi),a=(0,m.u3)(t,n);return r.createElement(a,null)},wi=()=>{var e=new de.QueryClient;return r.createElement(de.QueryClientProvider,{client:e},r.createElement(Vn.wT,{maxSnack:3},r.createElement(i.VK,null,r.createElement(o.Z5,null,r.createElement(o.AW,{path:"/operations",element:r.createElement(_i,{component:pr})},r.createElement(o.AW,{index:!0,element:r.createElement(Ht,null)}),r.createElement(o.AW,{path:"home",element:r.createElement(Ht,null)}),r.createElement(o.AW,{path:"site",element:r.createElement(ta,null)}),r.createElement(o.AW,{path:"activityLog",element:r.createElement(Hr,null)}),r.createElement(o.AW,{path:"dashboard",element:r.createElement(On,null)})),r.createElement(o.AW,{path:"/finance",element:r.createElement(_i,{component:fr})},r.createElement(o.AW,{index:!0,element:r.createElement(lr,null)}),r.createElement(o.AW,{path:"home",element:r.createElement(lr,null)}),r.createElement(o.AW,{path:"transaction",element:r.createElement(da,null)}),r.createElement(o.AW,{path:"activityLog",element:r.createElement(Hr,null)})),r.createElement(o.AW,{path:"/senior-manager-account",element:r.createElement(_i,{component:Ei})},r.createElement(o.AW,{index:!0,element:r.createElement(xa,null)}),r.createElement(o.AW,{path:"home",element:r.createElement(xa,null)}),r.createElement(o.AW,{path:"operations",element:r.createElement(_a,null)}),r.createElement(o.AW,{path:"finance",element:r.createElement(Da,null)}),r.createElement(o.AW,{path:"activity-log",element:r.createElement(La,null)})),r.createElement(o.AW,{path:"/account-ui",element:r.createElement(_i,{component:xi})},r.createElement(o.AW,{index:!0,element:r.createElement(Ga,null)}),r.createElement(o.AW,{path:"home",element:r.createElement(Ga,null)}),r.createElement(o.AW,{path:"companies",element:r.createElement(bl,null)}),r.createElement(o.AW,{path:"companies/:id",element:r.createElement(wl,null)}),r.createElement(o.AW,{path:"companies/:id/add-device",element:r.createElement(Kl,null)}),r.createElement(o.AW,{path:"companies/:id/add-employee",element:r.createElement(ai,null)}),r.createElement(o.AW,{path:"users",element:r.createElement(di,null)}),r.createElement(o.AW,{path:"devices",element:r.createElement(pi,null)})),r.createElement(o.AW,{path:"/account",element:r.createElement(_i,{component:vr})}),r.createElement(o.AW,{path:"/login",element:r.createElement(h,null)}),r.createElement(o.AW,{path:"/logout",element:r.createElement(Zi,null)}),r.createElement(o.AW,{path:"/post-login",element:r.createElement(_i,{component:vi})}),r.createElement(o.AW,{path:"/",element:r.createElement(_i,{component:gi})}),r.createElement(o.AW,{path:"*",element:r.createElement(_i,{component:r.createElement(o.Fg,{to:"/login",replace:!0})})})))))},Pi=(0,n(2394).lX)();console.log("Config",V);var ji={domain:V.AUTH0_DOMAIN||"",clientId:V.AUTH0_CLIENT_ID||"",onRedirectCallback:e=>{Pi.push(e&&e.returnTo?e.returnTo:window.location.pathname)},redirectUri:"".concat(window.location.origin,"/post-login"),audience:V.AUTH0_AUDIENCE,scope:"read:messages write:data openid profile email"},Di=document.getElementById("app");(0,a.s)(Di).render(r.createElement(m.tw,ji,r.createElement(wi,null)))}},a={};function l(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return r[e].call(n.exports,n,n.exports,l),n.exports}l.m=r,e=[],l.O=(t,n,r,a)=>{if(!n){var i=1/0;for(m=0;m<e.length;m++){for(var[n,r,a]=e[m],o=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(l.O).every((e=>l.O[e](n[c])))?n.splice(c--,1):(o=!1,a<i&&(i=a));if(o){e.splice(m--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var m=e.length;m>0&&e[m-1][2]>a;m--)e[m]=e[m-1];e[m]=[n,r,a]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);l.r(a);var i={};t=t||[null,n({}),n([]),n(n)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,l.d(a,i),a},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,o,c]=n,s=0;if(i.some((t=>0!==e[t]))){for(r in o)l.o(o,r)&&(l.m[r]=o[r]);if(c)var m=c(l)}for(t&&t(n);s<i.length;s++)a=i[s],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(m)},n=self.webpackChunksmarterise_webapp=self.webpackChunksmarterise_webapp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=l.O(void 0,[660],(()=>l(4290)));i=l.O(i)})();